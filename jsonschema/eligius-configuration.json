{
  "definitions": {
    "label": {
      "type": "object",
      "title": "Label",
      "description": "A localized label with language code, used for availableLanguages",
      "required": ["id", "languageCode", "label"],
      "properties": {
        "id": {
          "type": "string",
          "title": "Id",
          "description": "Unique identifier for the label"
        },
        "languageCode": {
          "type": "string",
          "title": "Language Code",
          "description": "IETF language tag (e.g., en-US, nl-NL)",
          "examples": ["en-US", "nl-NL", "de-DE"]
        },
        "label": {
          "type": "string",
          "title": "Label",
          "description": "The localized label text"
        }
      }
    },
    "localeReference": {
      "type": "object",
      "title": "Locale Reference",
      "description": "External locale file reference using JSON Reference syntax",
      "required": ["$ref"],
      "properties": {
        "$ref": {
          "type": "string",
          "title": "Reference",
          "description": "URL or relative path to JSON locale file",
          "examples": ["./locales/en-US.json", "https://cdn.example.com/locales/en-US.json"]
        }
      },
      "additionalProperties": false
    },
    "localeData": {
      "type": "object",
      "title": "Locale Data",
      "description": "Inline translation data with nested keys and string values",
      "additionalProperties": {
        "oneOf": [
          { "type": "string" },
          { "$ref": "#/definitions/localeData" }
        ]
      }
    },
    "localeEntry": {
      "oneOf": [
        { "$ref": "#/definitions/localeData" },
        { "$ref": "#/definitions/localeReference" }
      ],
      "title": "Locale Entry",
      "description": "Either inline locale data or an external reference"
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://rolandzwaga.github.io/eligius/jsonschema/eligius-configuration.json",
  "type": "object",
  "title": "Eligius Configuration Schema",
  "description": "Configuration schema for the Eligius timeline engine",
  "required": [
    "id",
    "engine",
    "containerSelector",
    "cssFiles",
    "language",
    "layoutTemplate",
    "availableLanguages",
    "initActions",
    "actions",
    "timelines"
  ],
  "properties": {
    "id": {
      "$id": "#/properties/id",
      "type": "string",
      "title": "Id",
      "description": "Unique identifier for the configuration",
      "examples": ["123e4567-e89b-12d3-a456-426614174000"],
      "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
    },
    "engine": {
      "$ref": "engine-config.json",
      "description": "Engine configuration"
    },
    "timelineProviderSettings": {
      "$ref": "timeline-provider-settings.json",
      "description": "Optional settings for timeline providers by type"
    },
    "containerSelector": {
      "$id": "#/properties/containerSelector",
      "type": "string",
      "title": "Container Selector",
      "description": "CSS selector for the main container element",
      "examples": ["#eligius-container"]
    },
    "cssFiles": {
      "$id": "#/properties/cssFiles",
      "type": "array",
      "title": "CSS Files",
      "description": "Array of CSS file paths to load",
      "items": {
        "type": "string"
      },
      "examples": [["styles/main.css", "styles/theme.css"]]
    },
    "language": {
      "$id": "#/properties/language",
      "type": "string",
      "title": "Language",
      "description": "Default language code (IETF language tag)",
      "examples": ["en-US", "nl-NL"]
    },
    "layoutTemplate": {
      "$id": "#/properties/layoutTemplate",
      "type": "string",
      "title": "Layout Template",
      "description": "HTML template for the layout, can be inline HTML or a template reference",
      "examples": ["template:layoutTemplate", "<div class=\"container\"></div>"]
    },
    "availableLanguages": {
      "$id": "#/properties/availableLanguages",
      "type": "array",
      "title": "Available Languages",
      "description": "List of available languages for the application",
      "items": {
        "$ref": "#/definitions/label"
      }
    },
    "initActions": {
      "$id": "#/properties/initActions",
      "type": "array",
      "title": "Init Actions",
      "description": "Actions to execute during engine initialization",
      "items": {
        "$ref": "endable-action.json"
      }
    },
    "actions": {
      "$id": "#/properties/actions",
      "type": "array",
      "title": "Actions",
      "description": "Reusable action templates",
      "items": {
        "$ref": "endable-action-template.json"
      }
    },
    "eventActions": {
      "$id": "#/properties/eventActions",
      "type": "array",
      "title": "Event Actions",
      "description": "Actions triggered by events",
      "items": {
        "$ref": "event-action.json"
      }
    },
    "timelines": {
      "$id": "#/properties/timelines",
      "type": "array",
      "title": "Timelines",
      "description": "Timeline configurations",
      "items": {
        "$ref": "timeline.json"
      }
    },
    "timelineFlow": {
      "$id": "#/properties/timelineFlow",
      "type": "object",
      "title": "Timeline Flow",
      "description": "Optional timeline flow configuration for navigation between timelines"
    },
    "locales": {
      "$id": "#/properties/locales",
      "type": "object",
      "title": "Locales",
      "description": "Locale configuration for rosetta-based translations. Keys are language codes (e.g., 'en-US'), values are inline data or external references.",
      "additionalProperties": {
        "$ref": "#/definitions/localeEntry"
      },
      "examples": [
        {
          "en-US": { "nav": { "home": "Home", "about": "About" } },
          "nl-NL": { "nav": { "home": "Thuis", "about": "Over ons" } }
        },
        {
          "en-US": { "$ref": "./locales/en-US.json" },
          "nl-NL": { "$ref": "./locales/nl-NL.json" }
        }
      ]
    }
  }
}
