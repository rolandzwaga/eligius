{"version":3,"sources":["webpack://library/webpack/universalModuleDefinition","webpack://library/webpack/bootstrap","webpack://library/./node_modules/mousetrap/mousetrap.js","webpack://library/./src/action/action.js","webpack://library/./src/action/endableaction.js","webpack://library/./src/action/index.js","webpack://library/./src/action/timelineaction.js","webpack://library/./src/chrono-trigger-engine.js","webpack://library/./src/configuration/configuration-resolver.js","webpack://library/./src/controllers/EventListenerController.js","webpack://library/./src/controllers/LabelController.js","webpack://library/./src/controllers/LottieController.js","webpack://library/./src/controllers/NavigationController.js","webpack://library/./src/controllers/ProgressbarController.js","webpack://library/./src/controllers/RoutingController.js","webpack://library/./src/controllers/SubtitlesController.js","webpack://library/./src/controllers/index.js","webpack://library/./src/engine-factory.js","webpack://library/./src/eventbus/actionregistry-eventbus-listener.js","webpack://library/./src/eventbus/eventbus.js","webpack://library/./src/eventbus/index.js","webpack://library/./src/eventbus/request-video-uri-interceptor.js","webpack://library/./src/importer/webpack-resource-importer.js","webpack://library/./src/index.js","webpack://library/./src/language-manager.js","webpack://library/./src/operation/addClass.js","webpack://library/./src/operation/addControllerToElement.js","webpack://library/./src/operation/addOptionList.js","webpack://library/./src/operation/animate.js","webpack://library/./src/operation/animateWithClass.js","webpack://library/./src/operation/broadcastEvent.js","webpack://library/./src/operation/clearElement.js","webpack://library/./src/operation/clearOperationData.js","webpack://library/./src/operation/customFunction.js","webpack://library/./src/operation/endAction.js","webpack://library/./src/operation/extendController.js","webpack://library/./src/operation/getControllerFromElement.js","webpack://library/./src/operation/getControllerInstance.js","webpack://library/./src/operation/getElementDimensions.js","webpack://library/./src/operation/helper/attachControllerToElement.js","webpack://library/./src/operation/helper/deepcopy.js","webpack://library/./src/operation/helper/extractOperationDataArgumentValues.js","webpack://library/./src/operation/helper/getElementData.js","webpack://library/./src/operation/helper/getNestedPropertyValue.js","webpack://library/./src/operation/helper/getNestedValue.js","webpack://library/./src/operation/helper/internalResolve.js","webpack://library/./src/operation/helper/mergeOperationData.js","webpack://library/./src/operation/helper/modifyDimensions.js","webpack://library/./src/operation/helper/removeEventDataFromOperationData.js","webpack://library/./src/operation/helper/resolveEventArguments.js","webpack://library/./src/operation/helper/resolvePropertyValues.js","webpack://library/./src/operation/index.js","webpack://library/./src/operation/loadJSON.js","webpack://library/./src/operation/removeClass.js","webpack://library/./src/operation/removeControllerFromElement.js","webpack://library/./src/operation/removeElement.js","webpack://library/./src/operation/removePropertiesFromOperationData.js","webpack://library/./src/operation/reparentElement.js","webpack://library/./src/operation/requestAction.js","webpack://library/./src/operation/resizeAction.js","webpack://library/./src/operation/selectElement.js","webpack://library/./src/operation/setElementAttributes.js","webpack://library/./src/operation/setElementContent.js","webpack://library/./src/operation/setOperationData.js","webpack://library/./src/operation/setStyle.js","webpack://library/./src/operation/startAction.js","webpack://library/./src/operation/toggleClass.js","webpack://library/./src/operation/toggleElement.js","webpack://library/./src/operation/wait.js","webpack://library/./src/timeline-event-names.js","webpack://library/./src/timelineproviders/index.js","webpack://library/./src/timelineproviders/jwplayer-timeline-provider.js","webpack://library/./src/timelineproviders/request-animation-frame-timeline-provider.js","webpack://library/external {\"amd\":\"jquery\",\"global\":\"jQuery\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\"}","webpack://library/external {\"amd\":\"lottie-web\",\"global\":\"lottie\",\"commonjs\":\"lottie-web\",\"commonjs2\":\"lottie-web\"}"],"names":["Action","actionData","eventBus","name","startOperations","eventbus","initOperationData","result","Promise","resolve","reject","executeOperation","e","console","error","operations","idx","previousOperationData","length","operationInfo","copy","operationData","mergedOperationData","instance","then","resultOperationData","executeResizeOperation","resizeInstance","EndableAction","endOperations","TimelineAction","active","duration","start","end","ChronoTriggerEngine","configuration","timelineProvider","_configuration","_eventbus","_timelineProvider","_timeLineActionsLookup","_eventbusListeners","_createLayoutTemplate","_addInitialisationListeners","language","labels","timelines","_languageManager","LanguageManager","_currentTimelineUri","uri","_createTimelineLookup","_initializeTimelineProvider","containerSelector","container","Error","layoutTemplate","html","warning","timelineProviderSettings","playerContainer","selector","init","_executeActions","initActions","on","TimelineEventNames","TIME","_onTimeHandler","bind","Math","floor","SEEK","_onSeekHandler","_cleanUpTimeline","_cleanUp","forEach","remover","destroy","push","REQUEST_ENGINE_ROOT","_handleRequestEngineRoot","REQUEST_TIMELINE_URI","_handleRequestTimelineUri","REQUEST_CURRENT_TIMELINE_POSITION","_handleRequestTimelinePosition","REQUEST_TIMELINE_CLEANUP","_handleTimelineComplete","EXECUTE_TIMELINEACTION","_handleExecuteTimelineAction","RESIZE_TIMELINEACTION","_resizeTimelineAction","timelineInfo","timelineActions","_addTimelineAction","timeLineAction","timelineStartPositions","_initializeTimelinePosition","_initializeUriLookup","startMethod","isNaN","Infinity","isFinite","timelineEndPositions","endMethod","lookup","position","actions","methodName","action","promise","engineRootSelector","resultCallback","index","previousVideoPosition","stop","timelineConfig","loop","once","FIRST_FRAME","pause","broadcastForTopic","DURATION","playerid","getDuration","_executeStartActions","seek","offset","playlistItem","_executeRelevantActions","_getActiveActions","_getActionsForPosition","allActions","filter","sort","a","b","executionType","_getRelevantTimelineActions","currentActions","apply","getPosition","_getTimelineActionsForUri","resize","some","event","pos","_lastPosition","_executeActionsForPosition","POSITION_UPDATE","TIME_UPDATE","_executeSeekActions","play","executions","exec","newActions","ConfigurationResolver","importer","systemName","actionRegistryListener","actionsLookup","processConfiguration","resolveOperations","initializeTimelineActions","initializeInitActions","initializeActions","initializeEventActions","config","eventActions","eventAction","registerAction","eventName","eventTopic","map","initAction","initializeTimelineAction","timelineAction","timelineOperations","_gatherOperations","systemNameHolders","concat","holder","importSystemEntry","parentConfig","constructor","Array","i","ii","Object","keys","key","processConfigProperty","value","startsWith","configProperty","substr","templateKey","jsonKey","json","EventListenerController","actionInstanceInfos","selectedElement","slice","actionOperationData","undefined","actionName","_isStartAction","isStart","actionInstance","broadcast","REQUEST_ACTION","_getElementTagName","_selectEventHandler","_eventHandler","element","tagName","toUpperCase","prefix","target","targetValue","_executeAction","actionInfo","method","options","l","opt","selected","eventArgs","off","LabelController","listeners","currentLanguage","labelData","REQUEST_CURRENT_LANGUAGE","REQUEST_LABEL_COLLECTION","labelId","labelCollection","createTextDataLookup","setLabel","LANGUAGE_CHANGE","handleLanguageChange","func","code","data","d","label","LottieController","anim","serializedData","serializedIEData","animationData","freezePosition","endPosition","renderer","autoplay","labelIds","viewBox","url","indexOf","parseFilename","JSON","stringify","iefallback","params","settings","split","setting","values","resultHolder","REQUEST_LABEL_COLLECTIONS","labelCollections","createAnimation","onComplete","playSegments","serialized","isIE","id","join","animData","parse","lottie","loadAnimation","timeCompleted","find","attr","infos","document","isEdge","window","NavigationController","playerId","navigation","navLookup","navVidIdLookup","ctrlLookup","activeNavigationPoint","labelControllers","eventhandlers","buildNavigationData","handleNavigateVideoUrl","highlightMenu","handleRequestCurrentNavigation","handleVideoComplete","buildHtml","initHistory","navId","getQueryVariable","videoIndex","nav","videoUrlIndex","variableIdx","href","location","hashIndex","query","substring","vars","navigationData","title","handler","ctrl","detach","onpopstate","state","parentElm","ul","addNavElement","append","visible","li","addLabel","addClickHandler","children","mouseup","menuMouseupHandler","navdata","requestedVideoPosition","pushCurrentState","navElm","removeClass","addClass","log","navData","autoNext","next","attach","previous","nextId","roots","ProgressbarController","textElement","detachers","callBack","providerId","positionUpdateHandler","PROVIDERID_REQUEST","clickHandler","detacher","perc","css","text","RoutingController","handleBeforeRequestVideoUrl","handlePushHistoryState","handlePopstate","history","pushState","navigationId","isHistoryRequest","item","currentPosition","currentState","replaceState","SubtitlesController","actionLookup","lastFunc","detachTime","onTimeHandler","detachLangChange","languageChangeHandler","internalDetach","detachMethods","f","newLanguage","titleLanguageLookup","controllerData","subtitleData","titles","subtitleTimeLookup","j","jj","subs","lang","setTitle","removeTitle","createActionLookup","EngineFactory","windowRef","_init","_resizeTimeout","_actionsLookup","_importer","Eventbus","REQUEST_INSTANCE","_requestInstanceHandler","_requestActionHandler","REQUEST_FUNCTION","_requestFunctionHandler","_resizeHandler","clear","clearTimeout","setTimeout","RESIZE","ctor","_importSystemEntry","_importSystemEntryWithEventbusDependency","resolver","engine","engineClass","ActionRegistryEventbusListener","registerEventlistener","registerInterceptor","RequestVideoUriInterceptor","process","timelineProviderClass","Mousetrap","preventDefault","PLAY_TOGGLE_REQUEST","providerid","chronoTriggerEngine","actionRegistry","args","eventHandlers","eventListeners","eventInterceptors","eventHandler","_getEventHandlers","_this","eventHandlerDecorator","arguments","handlers","splice","_callHandlers","eventbusListener","interceptor","interceptors","_getEventInterceptors","intercept","listener","handleEvent","BEFORE_REQUEST_TIMELINE_URI","WebpackResourceImporter","controllers","providers","main","_labelLookup","_currentLanguage","_createLabelLookup","_addEventbusListeners","_handleRequestLabelCollection","_handleRequestLabelCollections","_handleRequestCurrentLanguage","_handleLanguageChange","className","addControllerToElement","controllerInstance","newOperationData","createOptionElementText","valueProperty","labelProperty","defaultIndex","defaultValue","addOptionList","optionData","createOption","optionElements","animate","animationEasing","animationProperties","animationDuration","animateWithClass","one","broadcastEvent","eventArguments","clearElement","empty","clearOperationData","customFunction","endAction","mergedData","extendController","controllerExtension","getControllerFromElement","controllerName","controller","warn","getControllerInstance","propertyName","getElementDimensions","dimensions","modifier","width","innerWidth","height","innerHeight","attachControllerToElement","deepcopy","original","extractOperationDataArgumentValues","sourceObject","argumentValue","toLowerCase","propNames","shift","getElementData","getElementControllers","getNestedPropertyValue","propertyChain","properties","getNestedValue","currentInstance","suffix","prop","parts","internalResolve","mergeOperationData","modifyDimensionsByRatio","ratioModifier","ratio","ratios","getModifierSuffix","endIdx","isPercent","_modifyDimensions","widthModifier","heightModifier","modifyDimensions","parseInt","removeEventDataFromOperationData","resolveEventArguments","extract","resolvePropertyValues","propertyValue","loadJSON","jsonCache","cache","fetch","response","body","removeControllerFromElement","removeElement","remove","removePropertiesFromOperationData","propertyNames","reparentElement","newParentSelector","appendTo","requestAction","resizeAction","findElementBySelector","root","hasOwnProperty","selectElement","useExistingAsRoot","currentRoot","rootCallback","setElementAttributes","attributes","attrName","setElementContent","template","setOperationData","setStyle","startAction","toggleClass","toggleElement","toggle","wait","milliseconds","PLAY_REQUEST","STOP_REQUEST","PAUSE_REQUEST","SEEK_REQUEST","RESIZE_REQUEST","CONTAINER_REQUEST","DURATION_REQUEST","SEEKED","COMPLETE","PLAY","STOP","PAUSE","JwPlayerTimelineProvider","playerSettings","player","currentLoopHandler","_addEventListeners","urls","timeline","type","_extractUrls","jwp","jwplayer","p","w","h","setup","file","image","poster","controls","autostart","displaytitle","displaydescription","nextUpDisplay","abouttext","aboutlink","stretching","repeat","playlist","_handlePlayerReady","load","_loopHandler","_seekedHandler","_handlePlayerComplete","getPlaylistIndex","toggleplay","_container","getProvider","paused","callback","getState","getMute","getVolume","setMute","volume","setVolume","RequestAnimationFrameTimelineProvider","requestID","last","current","_updateBound","_update","random","currentPlaylistItem","firstFrame","playing","reset","_resize","requestDurationHandler","requestProviderIdHandler","now","FIRSTFRAME","_reset","requestAnimationFrame","_cancelAnimationFrame","cancelAnimationFrame","_extractPlaylist","_start"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA;;AAEA;AACA;AACA;AACA,eAAe,QAAQ;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,qBAAqB;AACpC,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,MAAM;AACrB,eAAe,MAAM;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,MAAM;AACrB,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,MAAM;AACrB,eAAe,QAAQ;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA,8CAA8C,EAAE;AAChD;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,MAAM;AACzB,mBAAmB,aAAa;AAChC,mBAAmB,QAAQ;AAC3B,mBAAmB,QAAQ;AAC3B,mBAAmB,QAAQ;AAC3B,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,uCAAuC;AAC9D;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B,mBAAmB,MAAM;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,MAAM;AACzB,mBAAmB,MAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,sBAAsB;;AAE7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,MAAM;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,MAAM;AACzB,mBAAmB,SAAS;AAC5B,mBAAmB,QAAQ;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,MAAM;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,SAAS;AAC5B,mBAAmB,QAAQ;AAC3B,mBAAmB,QAAQ;AAC3B,mBAAmB,QAAQ;AAC3B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,mDAAmD,kBAAkB;;AAErE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,mBAAmB,MAAM;AACzB,mBAAmB,SAAS;AAC5B,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA,2BAA2B,yBAAyB;AACpD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,SAAS;AACxB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,uDAAuD;AACvD;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,MAAM;AACrB,eAAe,QAAQ;AACvB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","file":"library.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"lottie-web\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"library\", [\"jquery\", \"lottie-web\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"library\"] = factory(require(\"jquery\"), require(\"lottie-web\"));\n\telse\n\t\troot[\"library\"] = factory(root[undefined], root[undefined]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE_jquery__, __WEBPACK_EXTERNAL_MODULE_lottie_web__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","/*global define:false */\n/**\n * Copyright 2012-2017 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Mousetrap is a simple keyboard shortcut library for Javascript with\n * no external dependencies\n *\n * @version 1.6.3\n * @url craig.is/killing/mice\n */\n(function(window, document, undefined) {\n\n    // Check if mousetrap is used inside browser, if not, return\n    if (!window) {\n        return;\n    }\n\n    /**\n     * mapping of special keycodes to their corresponding keys\n     *\n     * everything in this dictionary cannot use keypress events\n     * so it has to be here to map to the correct keycodes for\n     * keyup/keydown events\n     *\n     * @type {Object}\n     */\n    var _MAP = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta'\n    };\n\n    /**\n     * mapping for special characters so they can support\n     *\n     * this dictionary is only used incase you want to bind a\n     * keyup or keydown event to one of these keys\n     *\n     * @type {Object}\n     */\n    var _KEYCODE_MAP = {\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111 : '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']',\n        222: '\\''\n    };\n\n    /**\n     * this is a mapping of keys that require shift on a US keypad\n     * back to the non shift equivelents\n     *\n     * this is so you can use keyup events with these keys\n     *\n     * note that this will only work reliably on US keyboards\n     *\n     * @type {Object}\n     */\n    var _SHIFT_MAP = {\n        '~': '`',\n        '!': '1',\n        '@': '2',\n        '#': '3',\n        '$': '4',\n        '%': '5',\n        '^': '6',\n        '&': '7',\n        '*': '8',\n        '(': '9',\n        ')': '0',\n        '_': '-',\n        '+': '=',\n        ':': ';',\n        '\\\"': '\\'',\n        '<': ',',\n        '>': '.',\n        '?': '/',\n        '|': '\\\\'\n    };\n\n    /**\n     * this is a list of special strings you can use to map\n     * to modifier keys when you specify your keyboard shortcuts\n     *\n     * @type {Object}\n     */\n    var _SPECIAL_ALIASES = {\n        'option': 'alt',\n        'command': 'meta',\n        'return': 'enter',\n        'escape': 'esc',\n        'plus': '+',\n        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n    };\n\n    /**\n     * variable to store the flipped version of _MAP from above\n     * needed to check if we should use keypress or not when no action\n     * is specified\n     *\n     * @type {Object|undefined}\n     */\n    var _REVERSE_MAP;\n\n    /**\n     * loop through the f keys, f1 to f19 and add them to the map\n     * programatically\n     */\n    for (var i = 1; i < 20; ++i) {\n        _MAP[111 + i] = 'f' + i;\n    }\n\n    /**\n     * loop through to map numbers on the numeric keypad\n     */\n    for (i = 0; i <= 9; ++i) {\n\n        // This needs to use a string cause otherwise since 0 is falsey\n        // mousetrap will never fire for numpad 0 pressed as part of a keydown\n        // event.\n        //\n        // @see https://github.com/ccampbell/mousetrap/pull/258\n        _MAP[i + 96] = i.toString();\n    }\n\n    /**\n     * cross browser add event method\n     *\n     * @param {Element|HTMLDocument} object\n     * @param {string} type\n     * @param {Function} callback\n     * @returns void\n     */\n    function _addEvent(object, type, callback) {\n        if (object.addEventListener) {\n            object.addEventListener(type, callback, false);\n            return;\n        }\n\n        object.attachEvent('on' + type, callback);\n    }\n\n    /**\n     * takes the event and returns the key character\n     *\n     * @param {Event} e\n     * @return {string}\n     */\n    function _characterFromEvent(e) {\n\n        // for keypress events we should return the character as is\n        if (e.type == 'keypress') {\n            var character = String.fromCharCode(e.which);\n\n            // if the shift key is not pressed then it is safe to assume\n            // that we want the character to be lowercase.  this means if\n            // you accidentally have caps lock on then your key bindings\n            // will continue to work\n            //\n            // the only side effect that might not be desired is if you\n            // bind something like 'A' cause you want to trigger an\n            // event when capital A is pressed caps lock will no longer\n            // trigger the event.  shift+a will though.\n            if (!e.shiftKey) {\n                character = character.toLowerCase();\n            }\n\n            return character;\n        }\n\n        // for non keypress events the special maps are needed\n        if (_MAP[e.which]) {\n            return _MAP[e.which];\n        }\n\n        if (_KEYCODE_MAP[e.which]) {\n            return _KEYCODE_MAP[e.which];\n        }\n\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return String.fromCharCode(e.which).toLowerCase();\n    }\n\n    /**\n     * checks if two arrays are equal\n     *\n     * @param {Array} modifiers1\n     * @param {Array} modifiers2\n     * @returns {boolean}\n     */\n    function _modifiersMatch(modifiers1, modifiers2) {\n        return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n    }\n\n    /**\n     * takes a key event and figures out what the modifiers are\n     *\n     * @param {Event} e\n     * @returns {Array}\n     */\n    function _eventModifiers(e) {\n        var modifiers = [];\n\n        if (e.shiftKey) {\n            modifiers.push('shift');\n        }\n\n        if (e.altKey) {\n            modifiers.push('alt');\n        }\n\n        if (e.ctrlKey) {\n            modifiers.push('ctrl');\n        }\n\n        if (e.metaKey) {\n            modifiers.push('meta');\n        }\n\n        return modifiers;\n    }\n\n    /**\n     * prevents default for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _preventDefault(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            return;\n        }\n\n        e.returnValue = false;\n    }\n\n    /**\n     * stops propogation for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _stopPropagation(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n            return;\n        }\n\n        e.cancelBubble = true;\n    }\n\n    /**\n     * determines if the keycode specified is a modifier key or not\n     *\n     * @param {string} key\n     * @returns {boolean}\n     */\n    function _isModifier(key) {\n        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';\n    }\n\n    /**\n     * reverses the map lookup so that we can look for specific keys\n     * to see what can and can't use keypress\n     *\n     * @return {Object}\n     */\n    function _getReverseMap() {\n        if (!_REVERSE_MAP) {\n            _REVERSE_MAP = {};\n            for (var key in _MAP) {\n\n                // pull out the numeric keypad from here cause keypress should\n                // be able to detect the keys from the character\n                if (key > 95 && key < 112) {\n                    continue;\n                }\n\n                if (_MAP.hasOwnProperty(key)) {\n                    _REVERSE_MAP[_MAP[key]] = key;\n                }\n            }\n        }\n        return _REVERSE_MAP;\n    }\n\n    /**\n     * picks the best action based on the key combination\n     *\n     * @param {string} key - character for key\n     * @param {Array} modifiers\n     * @param {string=} action passed in\n     */\n    function _pickBestAction(key, modifiers, action) {\n\n        // if no action was picked in we should try to pick the one\n        // that we think would work best for this key\n        if (!action) {\n            action = _getReverseMap()[key] ? 'keydown' : 'keypress';\n        }\n\n        // modifier keys don't work as expected with keypress,\n        // switch to keydown\n        if (action == 'keypress' && modifiers.length) {\n            action = 'keydown';\n        }\n\n        return action;\n    }\n\n    /**\n     * Converts from a string key combination to an array\n     *\n     * @param  {string} combination like \"command+shift+l\"\n     * @return {Array}\n     */\n    function _keysFromString(combination) {\n        if (combination === '+') {\n            return ['+'];\n        }\n\n        combination = combination.replace(/\\+{2}/g, '+plus');\n        return combination.split('+');\n    }\n\n    /**\n     * Gets info for a specific key combination\n     *\n     * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n     * @param  {string=} action\n     * @returns {Object}\n     */\n    function _getKeyInfo(combination, action) {\n        var keys;\n        var key;\n        var i;\n        var modifiers = [];\n\n        // take the keys from this pattern and figure out what the actual\n        // pattern is all about\n        keys = _keysFromString(combination);\n\n        for (i = 0; i < keys.length; ++i) {\n            key = keys[i];\n\n            // normalize key names\n            if (_SPECIAL_ALIASES[key]) {\n                key = _SPECIAL_ALIASES[key];\n            }\n\n            // if this is not a keypress event then we should\n            // be smart about using shift keys\n            // this will only work for US keyboards however\n            if (action && action != 'keypress' && _SHIFT_MAP[key]) {\n                key = _SHIFT_MAP[key];\n                modifiers.push('shift');\n            }\n\n            // if this key is a modifier then add it to the list of modifiers\n            if (_isModifier(key)) {\n                modifiers.push(key);\n            }\n        }\n\n        // depending on what the key combination is\n        // we will try to pick the best event for it\n        action = _pickBestAction(key, modifiers, action);\n\n        return {\n            key: key,\n            modifiers: modifiers,\n            action: action\n        };\n    }\n\n    function _belongsTo(element, ancestor) {\n        if (element === null || element === document) {\n            return false;\n        }\n\n        if (element === ancestor) {\n            return true;\n        }\n\n        return _belongsTo(element.parentNode, ancestor);\n    }\n\n    function Mousetrap(targetElement) {\n        var self = this;\n\n        targetElement = targetElement || document;\n\n        if (!(self instanceof Mousetrap)) {\n            return new Mousetrap(targetElement);\n        }\n\n        /**\n         * element to attach key events to\n         *\n         * @type {Element}\n         */\n        self.target = targetElement;\n\n        /**\n         * a list of all the callbacks setup via Mousetrap.bind()\n         *\n         * @type {Object}\n         */\n        self._callbacks = {};\n\n        /**\n         * direct map of string combinations to callbacks used for trigger()\n         *\n         * @type {Object}\n         */\n        self._directMap = {};\n\n        /**\n         * keeps track of what level each sequence is at since multiple\n         * sequences can start out with the same sequence\n         *\n         * @type {Object}\n         */\n        var _sequenceLevels = {};\n\n        /**\n         * variable to store the setTimeout call\n         *\n         * @type {null|number}\n         */\n        var _resetTimer;\n\n        /**\n         * temporary state where we will ignore the next keyup\n         *\n         * @type {boolean|string}\n         */\n        var _ignoreNextKeyup = false;\n\n        /**\n         * temporary state where we will ignore the next keypress\n         *\n         * @type {boolean}\n         */\n        var _ignoreNextKeypress = false;\n\n        /**\n         * are we currently inside of a sequence?\n         * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n         *\n         * @type {boolean|string}\n         */\n        var _nextExpectedAction = false;\n\n        /**\n         * resets all sequence counters except for the ones passed in\n         *\n         * @param {Object} doNotReset\n         * @returns void\n         */\n        function _resetSequences(doNotReset) {\n            doNotReset = doNotReset || {};\n\n            var activeSequences = false,\n                key;\n\n            for (key in _sequenceLevels) {\n                if (doNotReset[key]) {\n                    activeSequences = true;\n                    continue;\n                }\n                _sequenceLevels[key] = 0;\n            }\n\n            if (!activeSequences) {\n                _nextExpectedAction = false;\n            }\n        }\n\n        /**\n         * finds all callbacks that match based on the keycode, modifiers,\n         * and action\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event|Object} e\n         * @param {string=} sequenceName - name of the sequence we are looking for\n         * @param {string=} combination\n         * @param {number=} level\n         * @returns {Array}\n         */\n        function _getMatches(character, modifiers, e, sequenceName, combination, level) {\n            var i;\n            var callback;\n            var matches = [];\n            var action = e.type;\n\n            // if there are no events related to this keycode\n            if (!self._callbacks[character]) {\n                return [];\n            }\n\n            // if a modifier key is coming up on its own we should allow it\n            if (action == 'keyup' && _isModifier(character)) {\n                modifiers = [character];\n            }\n\n            // loop through all callbacks for the key that was pressed\n            // and see if any of them match\n            for (i = 0; i < self._callbacks[character].length; ++i) {\n                callback = self._callbacks[character][i];\n\n                // if a sequence name is not specified, but this is a sequence at\n                // the wrong level then move onto the next match\n                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {\n                    continue;\n                }\n\n                // if the action we are looking for doesn't match the action we got\n                // then we should keep going\n                if (action != callback.action) {\n                    continue;\n                }\n\n                // if this is a keypress event and the meta key and control key\n                // are not pressed that means that we need to only look at the\n                // character, otherwise check the modifiers as well\n                //\n                // chrome will not fire a keypress if meta or control is down\n                // safari will fire a keypress if meta or meta+shift is down\n                // firefox will fire a keypress if meta or control is down\n                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {\n\n                    // when you bind a combination or sequence a second time it\n                    // should overwrite the first one.  if a sequenceName or\n                    // combination is specified in this call it does just that\n                    //\n                    // @todo make deleting its own method?\n                    var deleteCombo = !sequenceName && callback.combo == combination;\n                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;\n                    if (deleteCombo || deleteSequence) {\n                        self._callbacks[character].splice(i, 1);\n                    }\n\n                    matches.push(callback);\n                }\n            }\n\n            return matches;\n        }\n\n        /**\n         * actually calls the callback function\n         *\n         * if your callback function returns false this will use the jquery\n         * convention - prevent default and stop propogation on the event\n         *\n         * @param {Function} callback\n         * @param {Event} e\n         * @returns void\n         */\n        function _fireCallback(callback, e, combo, sequence) {\n\n            // if this event should not happen stop here\n            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n                return;\n            }\n\n            if (callback(e, combo) === false) {\n                _preventDefault(e);\n                _stopPropagation(e);\n            }\n        }\n\n        /**\n         * handles a character key event\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event} e\n         * @returns void\n         */\n        self._handleKey = function(character, modifiers, e) {\n            var callbacks = _getMatches(character, modifiers, e);\n            var i;\n            var doNotReset = {};\n            var maxLevel = 0;\n            var processedSequenceCallback = false;\n\n            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n            for (i = 0; i < callbacks.length; ++i) {\n                if (callbacks[i].seq) {\n                    maxLevel = Math.max(maxLevel, callbacks[i].level);\n                }\n            }\n\n            // loop through matching callbacks for this key event\n            for (i = 0; i < callbacks.length; ++i) {\n\n                // fire for all sequence callbacks\n                // this is because if for example you have multiple sequences\n                // bound such as \"g i\" and \"g t\" they both need to fire the\n                // callback for matching g cause otherwise you can only ever\n                // match the first one\n                if (callbacks[i].seq) {\n\n                    // only fire callbacks for the maxLevel to prevent\n                    // subsequences from also firing\n                    //\n                    // for example 'a option b' should not cause 'option b' to fire\n                    // even though 'option b' is part of the other sequence\n                    //\n                    // any sequences that do not match here will be discarded\n                    // below by the _resetSequences call\n                    if (callbacks[i].level != maxLevel) {\n                        continue;\n                    }\n\n                    processedSequenceCallback = true;\n\n                    // keep a list of which sequences were matches for later\n                    doNotReset[callbacks[i].seq] = 1;\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);\n                    continue;\n                }\n\n                // if there were no sequence matches but we are still here\n                // that means this is a regular match so we should fire that\n                if (!processedSequenceCallback) {\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n                }\n            }\n\n            // if the key you pressed matches the type of sequence without\n            // being a modifier (ie \"keyup\" or \"keypress\") then we should\n            // reset all sequences that were not matched by this event\n            //\n            // this is so, for example, if you have the sequence \"h a t\" and you\n            // type \"h e a r t\" it does not match.  in this case the \"e\" will\n            // cause the sequence to reset\n            //\n            // modifier keys are ignored because you can have a sequence\n            // that contains modifiers such as \"enter ctrl+space\" and in most\n            // cases the modifier key will be pressed before the next key\n            //\n            // also if you have a sequence such as \"ctrl+b a\" then pressing the\n            // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n            //\n            // the \"keydown\" is expected when there is a modifier, but the\n            // \"keypress\" ends up matching the _nextExpectedAction since it occurs\n            // after and that causes the sequence to reset\n            //\n            // we ignore keypresses in a sequence that directly follow a keydown\n            // for the same character\n            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;\n            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {\n                _resetSequences(doNotReset);\n            }\n\n            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';\n        };\n\n        /**\n         * handles a keydown event\n         *\n         * @param {Event} e\n         * @returns void\n         */\n        function _handleKeyEvent(e) {\n\n            // normalize e.which for key events\n            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n            if (typeof e.which !== 'number') {\n                e.which = e.keyCode;\n            }\n\n            var character = _characterFromEvent(e);\n\n            // no character found then stop\n            if (!character) {\n                return;\n            }\n\n            // need to use === for the character check because the character can be 0\n            if (e.type == 'keyup' && _ignoreNextKeyup === character) {\n                _ignoreNextKeyup = false;\n                return;\n            }\n\n            self.handleKey(character, _eventModifiers(e), e);\n        }\n\n        /**\n         * called to set a 1 second timeout on the specified sequence\n         *\n         * this is so after each key press in the sequence you have 1 second\n         * to press the next key before you have to start over\n         *\n         * @returns void\n         */\n        function _resetSequenceTimer() {\n            clearTimeout(_resetTimer);\n            _resetTimer = setTimeout(_resetSequences, 1000);\n        }\n\n        /**\n         * binds a key sequence to an event\n         *\n         * @param {string} combo - combo specified in bind call\n         * @param {Array} keys\n         * @param {Function} callback\n         * @param {string=} action\n         * @returns void\n         */\n        function _bindSequence(combo, keys, callback, action) {\n\n            // start off by adding a sequence level record for this combination\n            // and setting the level to 0\n            _sequenceLevels[combo] = 0;\n\n            /**\n             * callback to increase the sequence level for this sequence and reset\n             * all other sequences that were active\n             *\n             * @param {string} nextAction\n             * @returns {Function}\n             */\n            function _increaseSequence(nextAction) {\n                return function() {\n                    _nextExpectedAction = nextAction;\n                    ++_sequenceLevels[combo];\n                    _resetSequenceTimer();\n                };\n            }\n\n            /**\n             * wraps the specified callback inside of another function in order\n             * to reset all sequence counters as soon as this sequence is done\n             *\n             * @param {Event} e\n             * @returns void\n             */\n            function _callbackAndReset(e) {\n                _fireCallback(callback, e, combo);\n\n                // we should ignore the next key up if the action is key down\n                // or keypress.  this is so if you finish a sequence and\n                // release the key the final key will not trigger a keyup\n                if (action !== 'keyup') {\n                    _ignoreNextKeyup = _characterFromEvent(e);\n                }\n\n                // weird race condition if a sequence ends with the key\n                // another sequence begins with\n                setTimeout(_resetSequences, 10);\n            }\n\n            // loop through keys one at a time and bind the appropriate callback\n            // function.  for any key leading up to the final one it should\n            // increase the sequence. after the final, it should reset all sequences\n            //\n            // if an action is specified in the original bind call then that will\n            // be used throughout.  otherwise we will pass the action that the\n            // next key in the sequence should match.  this allows a sequence\n            // to mix and match keypress and keydown events depending on which\n            // ones are better suited to the key provided\n            for (var i = 0; i < keys.length; ++i) {\n                var isFinal = i + 1 === keys.length;\n                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);\n                _bindSingle(keys[i], wrappedCallback, action, combo, i);\n            }\n        }\n\n        /**\n         * binds a single keyboard combination\n         *\n         * @param {string} combination\n         * @param {Function} callback\n         * @param {string=} action\n         * @param {string=} sequenceName - name of sequence if part of sequence\n         * @param {number=} level - what part of the sequence the command is\n         * @returns void\n         */\n        function _bindSingle(combination, callback, action, sequenceName, level) {\n\n            // store a direct mapped reference for use with Mousetrap.trigger\n            self._directMap[combination + ':' + action] = callback;\n\n            // make sure multiple spaces in a row become a single space\n            combination = combination.replace(/\\s+/g, ' ');\n\n            var sequence = combination.split(' ');\n            var info;\n\n            // if this pattern is a sequence of keys then run through this method\n            // to reprocess each pattern one key at a time\n            if (sequence.length > 1) {\n                _bindSequence(combination, sequence, callback, action);\n                return;\n            }\n\n            info = _getKeyInfo(combination, action);\n\n            // make sure to initialize array if this is the first time\n            // a callback is added for this key\n            self._callbacks[info.key] = self._callbacks[info.key] || [];\n\n            // remove an existing match if there is one\n            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);\n\n            // add this call back to the array\n            // if it is a sequence put it at the beginning\n            // if not put it at the end\n            //\n            // this is important because the way these are processed expects\n            // the sequence ones to come first\n            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n                callback: callback,\n                modifiers: info.modifiers,\n                action: info.action,\n                seq: sequenceName,\n                level: level,\n                combo: combination\n            });\n        }\n\n        /**\n         * binds multiple combinations to the same callback\n         *\n         * @param {Array} combinations\n         * @param {Function} callback\n         * @param {string|undefined} action\n         * @returns void\n         */\n        self._bindMultiple = function(combinations, callback, action) {\n            for (var i = 0; i < combinations.length; ++i) {\n                _bindSingle(combinations[i], callback, action);\n            }\n        };\n\n        // start!\n        _addEvent(targetElement, 'keypress', _handleKeyEvent);\n        _addEvent(targetElement, 'keydown', _handleKeyEvent);\n        _addEvent(targetElement, 'keyup', _handleKeyEvent);\n    }\n\n    /**\n     * binds an event to mousetrap\n     *\n     * can be a single key, a combination of keys separated with +,\n     * an array of keys, or a sequence of keys separated by spaces\n     *\n     * be sure to list the modifier keys first to make sure that the\n     * correct key ends up getting bound (the last key in the pattern)\n     *\n     * @param {string|Array} keys\n     * @param {Function} callback\n     * @param {string=} action - 'keypress', 'keydown', or 'keyup'\n     * @returns void\n     */\n    Mousetrap.prototype.bind = function(keys, callback, action) {\n        var self = this;\n        keys = keys instanceof Array ? keys : [keys];\n        self._bindMultiple.call(self, keys, callback, action);\n        return self;\n    };\n\n    /**\n     * unbinds an event to mousetrap\n     *\n     * the unbinding sets the callback function of the specified key combo\n     * to an empty function and deletes the corresponding key in the\n     * _directMap dict.\n     *\n     * TODO: actually remove this from the _callbacks dictionary instead\n     * of binding an empty function\n     *\n     * the keycombo+action has to be exactly the same as\n     * it was defined in the bind method\n     *\n     * @param {string|Array} keys\n     * @param {string} action\n     * @returns void\n     */\n    Mousetrap.prototype.unbind = function(keys, action) {\n        var self = this;\n        return self.bind.call(self, keys, function() {}, action);\n    };\n\n    /**\n     * triggers an event that has already been bound\n     *\n     * @param {string} keys\n     * @param {string=} action\n     * @returns void\n     */\n    Mousetrap.prototype.trigger = function(keys, action) {\n        var self = this;\n        if (self._directMap[keys + ':' + action]) {\n            self._directMap[keys + ':' + action]({}, keys);\n        }\n        return self;\n    };\n\n    /**\n     * resets the library back to its initial state.  this is useful\n     * if you want to clear out the current keyboard shortcuts and bind\n     * new ones - for example if you switch to another page\n     *\n     * @returns void\n     */\n    Mousetrap.prototype.reset = function() {\n        var self = this;\n        self._callbacks = {};\n        self._directMap = {};\n        return self;\n    };\n\n    /**\n     * should we stop this event before firing off callbacks\n     *\n     * @param {Event} e\n     * @param {Element} element\n     * @return {boolean}\n     */\n    Mousetrap.prototype.stopCallback = function(e, element) {\n        var self = this;\n\n        // if the element has the class \"mousetrap\" then no need to stop\n        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n            return false;\n        }\n\n        if (_belongsTo(element, self.target)) {\n            return false;\n        }\n\n        // Events originating from a shadow DOM are re-targetted and `e.target` is the shadow host,\n        // not the initial event target in the shadow tree. Note that not all events cross the\n        // shadow boundary.\n        // For shadow trees with `mode: 'open'`, the initial event target is the first element in\n        // the events composed path. For shadow trees with `mode: 'closed'`, the initial event\n        // target cannot be obtained.\n        if ('composedPath' in e && typeof e.composedPath === 'function') {\n            // For open shadow trees, update `element` so that the following check works.\n            var initialEventTarget = e.composedPath()[0];\n            if (initialEventTarget !== e.target) {\n                element = initialEventTarget;\n            }\n        }\n\n        // stop for input, select, and textarea\n        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;\n    };\n\n    /**\n     * exposes _handleKey publicly so it can be overwritten by extensions\n     */\n    Mousetrap.prototype.handleKey = function() {\n        var self = this;\n        return self._handleKey.apply(self, arguments);\n    };\n\n    /**\n     * allow custom key mappings\n     */\n    Mousetrap.addKeycodes = function(object) {\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                _MAP[key] = object[key];\n            }\n        }\n        _REVERSE_MAP = null;\n    };\n\n    /**\n     * Init the global mousetrap functions\n     *\n     * This method is needed to allow the global mousetrap functions to work\n     * now that mousetrap is a constructor function.\n     */\n    Mousetrap.init = function() {\n        var documentMousetrap = Mousetrap(document);\n        for (var method in documentMousetrap) {\n            if (method.charAt(0) !== '_') {\n                Mousetrap[method] = (function(method) {\n                    return function() {\n                        return documentMousetrap[method].apply(documentMousetrap, arguments);\n                    };\n                } (method));\n            }\n        }\n    };\n\n    Mousetrap.init();\n\n    // expose mousetrap to the global object\n    window.Mousetrap = Mousetrap;\n\n    // expose as a common js module\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Mousetrap;\n    }\n\n    // expose mousetrap as an AMD module\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return Mousetrap;\n        });\n    }\n}) (typeof window !== 'undefined' ? window : null, typeof  window !== 'undefined' ? document : null);\n","import deepcopy from '../operation/helper/deepcopy';\r\n\r\nclass Action {\r\n\r\n\tconstructor(actionData, eventBus) {\r\n\t\tthis.name = actionData.name;\r\n\t\tthis.startOperations = actionData.startOperations;\r\n\t\tthis.eventbus = eventBus; \r\n\t}\r\n\r\n\tstart(initOperationData) {\r\n\t\tconst result = new Promise((resolve, reject) => {\r\n\t\t\tthis.executeOperation(this.startOperations, 0, resolve, reject, initOperationData);\r\n\t\t}).catch((e) => {\r\n\t\t\tconsole.error(`Error in action start '${this.name}'`);\r\n\t\t\tthrow e;\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\texecuteOperation(operations, idx, resolve, reject, previousOperationData) {\r\n\t\tpreviousOperationData = previousOperationData || {};\r\n\r\n\t\tif (idx < operations.length) {\r\n\t\t\tconst operationInfo = operations[idx];\r\n\t\t\tconst copy = (operationInfo.operationData) ? deepcopy(operationInfo.operationData) : {};\r\n\t\t\tconst mergedOperationData = Object.assign(previousOperationData, copy);\r\n\t\t\t\r\n\t\t\tconst result = operationInfo.instance(mergedOperationData, this.eventbus);\r\n\t\t\t\r\n            if (result.then) {\r\n\t\t\t\tresult.then((resultOperationData) => {\r\n\t\t\t\t\tthis.executeOperation(operations, ++idx, resolve, reject, resultOperationData);\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t});\r\n            } else {\r\n                this.executeOperation(operations, ++idx, resolve, reject, result);\r\n            }\r\n\t\t} else {\r\n\t\t\tresolve(previousOperationData);\r\n\t\t}\r\n\t}\r\n\r\n\tresize(operationData) {\r\n\t\tconst idx = 0;\r\n\t\tconst result = new Promise((resolve, reject) => {\r\n\t\t\tthis.executeResizeOperation(this.startOperations, idx, resolve, reject, operationData);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\texecuteResizeOperation(operations, idx, resolve, reject, previousOperationData) {\r\n\t\tpreviousOperationData = previousOperationData || {};\r\n\t\t\r\n\t\tif (idx < operations.length) {\r\n\t\t\tconst operationInfo = operations[idx];\r\n\t\t\tif ((operationInfo.resizeInstance)) {\r\n\t\t\t\tconst copy = ((operationInfo.operationData)) ? deepcopy(operationInfo.operationData) : {};\r\n\t\t\t\tconst mergedOperationData = Object.assign(previousOperationData, copy);\r\n\r\n\t\t\t\tconst result = operationInfo.resizeInstance(mergedOperationData);\r\n\t\t\t\tif (result.then){\r\n\t\t\t\t\tresult.then((resultOperationData) => {\r\n\t\t\t\t\t\tthis.executeResizeOperation(operations, ++idx, resolve, reject, resultOperationData);\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.executeResizeOperation(operations, ++idx, resolve, reject, result);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.executeResizeOperation(operations, ++idx, resolve, reject, previousOperationData);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tresolve(previousOperationData);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Action;\r\n","import Action from './action';\r\n\r\nclass EndableAction extends Action {\r\n\r\n\tconstructor(actionData, eventBus) {\r\n\t\tsuper(actionData, eventBus);\r\n\t\tthis.endOperations = actionData.endOperations;\r\n\t}\r\n\r\n\tend(initOperationData) {\r\n\t\tif ((this.endOperations) && (this.endOperations.length)) {\r\n\t\t\tconst idx = 0;\r\n\t\t\tconst result = new Promise((resolve, reject) => {\r\n\t\t\t\tthis.executeOperation(this.endOperations, idx, resolve, reject, initOperationData);\r\n\t\t\t}).catch((e) => {\r\n\t\t\t\tconsole.error(`Error in action end'${this.name}'`);\r\n\t\t\t\tthrow e;\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tresolve(initOperationData);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nexport default EndableAction;\r\n","export { default as Action } from './action';\r\nexport { default as EndableAction } from './endableaction';\r\nexport { default as TimelineAction } from './timelineaction';","import EndableAction from './endableaction';\r\n\r\nclass TimelineAction extends EndableAction {\r\n\r\n\tconstructor(actionData, eventBus) {\r\n\t\tsuper(actionData, eventBus);\r\n\t\tthis.active = false;\r\n\t\tthis.duration = actionData.duration;\r\n\t\tthis.duration.start = +this.duration.start;\r\n\t\tthis.duration.end = +this.duration.end;\r\n\t}\r\n\r\n\tstart() {\r\n\t\tif ((!this.active) || (this.duration.end < 0)) {\r\n\t\t\tthis.active = (this.duration.end > -1);\r\n\t\t\treturn super.start();\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tend(initOperationData) {\r\n\t\tthis.active = false;\r\n\t\treturn super.end(initOperationData);\r\n\t}\r\n\r\n\tresize(operationData) {\r\n\t\tif ((this.active) || (this.duration.end < 0)) {\r\n\t\t\treturn super.resize(operationData);\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nexport default TimelineAction;\r\n","import LanguageManager from './language-manager';\r\nimport $ from 'jquery';\r\nimport TimelineEventNames from './timeline-event-names';\r\n\r\nclass ChronoTriggerEngine {\r\n\r\n    constructor(configuration, eventbus, timelineProvider) {\r\n        this._configuration = configuration;\r\n        this._eventbus = eventbus;\r\n        this._timelineProvider = timelineProvider;\r\n        this._timeLineActionsLookup = {};\r\n        this._eventbusListeners = [];\r\n    }\r\n\r\n    init() {\r\n        this._createLayoutTemplate();\r\n\r\n        this._addInitialisationListeners();\r\n\r\n        const { language, labels, timelines} = this._configuration;\r\n        const { _eventbus } = this;\r\n\r\n        this._languageManager = new LanguageManager(language, labels, _eventbus);\r\n\r\n        this._currentTimelineUri = (timelines && timelines.length) ? timelines[0].uri : null;\r\n\r\n        this._createTimelineLookup();\r\n\r\n        return this._initializeTimelineProvider();\r\n    }\r\n\r\n    _createLayoutTemplate() {\r\n        const { containerSelector } = this._configuration;\r\n        const container = $(containerSelector);\r\n        if (!container || !container.length) {\r\n            throw new Error(`Container selector not found: ${containerSelector}`);\r\n        }\r\n        const { layoutTemplate } = this._configuration;\r\n        if (layoutTemplate && layoutTemplate.length) {\r\n            container.html(layoutTemplate);\r\n        } else {\r\n            console.warning('layoutTemplate is empty, unable to create layout');\r\n        }\r\n    }\r\n\r\n    _initializeTimelineProvider() {\r\n        const { timelineProviderSettings } = this._configuration;\r\n        if (!timelineProviderSettings) {\r\n            return;\r\n        }\r\n\r\n        const playerContainer = $(`#${timelineProviderSettings.selector}`);\r\n\r\n        if (playerContainer.length) {\r\n            return new Promise((resolve) => {\r\n                this._timelineProvider.init().then(() => {\r\n                    this._executeActions((this._configuration.initActions), \"start\").then(() => {\r\n                        this._timelineProvider.on(TimelineEventNames.TIME, this._onTimeHandler.bind(this, Math.floor));\r\n                        this._timelineProvider.on(TimelineEventNames.SEEK, this._onSeekHandler.bind(this, Math.floor));\r\n                        resolve(this._timelineProvider);\r\n                    });\r\n                });\r\n            });\r\n        }\r\n\r\n        return new Promise((resolve)=> {\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    async _cleanUp() {\r\n        await this._cleanUpTimeline();\r\n        await this._executeActions((this._configuration.initActions), 'end');\r\n    }\r\n\r\n    async destroy() {\r\n        await this._cleanUp();\r\n        this._configuration = null;\r\n        this._eventbus = null;\r\n        this._timelineProvider = null;\r\n        this._timeLineActionsLookup = null;\r\n        this._eventbusListeners.forEach(remover => remover());\r\n        if (this._timelineProvider) {\r\n            this._timelineProvider.destroy();\r\n        }\r\n    }\r\n\r\n    _addInitialisationListeners() {\r\n        this._eventbusListeners.push(this._eventbus.on(TimelineEventNames.REQUEST_ENGINE_ROOT, this._handleRequestEngineRoot.bind(this, this._configuration.containerSelector)));\r\n        this._eventbusListeners.push(this._eventbus.on(TimelineEventNames.REQUEST_TIMELINE_URI, this._handleRequestTimelineUri.bind(this)));\r\n        this._eventbusListeners.push(this._eventbus.on(TimelineEventNames.REQUEST_CURRENT_TIMELINE_POSITION, this._handleRequestTimelinePosition.bind(this)));\r\n        this._eventbusListeners.push(this._eventbus.on(TimelineEventNames.REQUEST_TIMELINE_CLEANUP, this._handleTimelineComplete.bind(this)));\r\n        this._eventbusListeners.push(this._eventbus.on(TimelineEventNames.EXECUTE_TIMELINEACTION, this._handleExecuteTimelineAction.bind(this)));\r\n        this._eventbusListeners.push(this._eventbus.on(TimelineEventNames.RESIZE_TIMELINEACTION, this._resizeTimelineAction.bind(this)));\r\n    }\r\n\r\n    _createTimelineLookup() {\r\n        if (!this._configuration.timelines) {\r\n            return;\r\n        }\r\n        this._configuration.timelines.forEach((timelineInfo) => {\r\n            timelineInfo.timelineActions.forEach(this._addTimelineAction.bind(this, timelineInfo.uri));\r\n        });\r\n    }\r\n\r\n    _addTimelineAction(uri, timeLineAction) {\r\n        const start = timeLineAction.duration.start;\r\n        const timelineStartPositions = this._initializeTimelinePosition(this._initializeUriLookup(this._timeLineActionsLookup, uri), start);\r\n        const startMethod = timeLineAction.start.bind(timeLineAction);\r\n        timelineStartPositions.push(startMethod);\r\n\r\n        let end = timeLineAction.duration.end;\r\n        if ((!end) || (isNaN(end))) {\r\n            end = timeLineAction.duration.end = Infinity;\r\n        }\r\n        if (isFinite(end)) {\r\n            const timelineEndPositions = this._initializeTimelinePosition(this._timeLineActionsLookup[uri], end);\r\n            const endMethod = timeLineAction.end.bind(timeLineAction);\r\n            timelineEndPositions.push(endMethod);\r\n        }\r\n    }\r\n\r\n    _initializeUriLookup(lookup, uri) {\r\n        if (!lookup[uri]) {\r\n            lookup[uri] = {};\r\n        }\r\n        return lookup[uri];\r\n    }\r\n\r\n    _initializeTimelinePosition(lookup, position) {\r\n        if (!lookup[position]) {\r\n            lookup[position] = [];\r\n        }\r\n        return lookup[position];\r\n    }\r\n\r\n    _executeActions(actions, methodName, idx=0) {\r\n        if (idx < actions.length) {\r\n            const action = actions[idx];\r\n\r\n            const promise = action[methodName]();\r\n            return promise.then(() => {\r\n                return this._executeActions(actions, methodName, ++idx);\r\n            });\r\n        }\r\n        return new Promise((resolve) => {\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    _handleRequestEngineRoot(engineRootSelector, resultCallback) {\r\n        resultCallback($(engineRootSelector));\r\n    }\r\n\r\n    _handleRequestTimelineUri(index, position, previousVideoPosition) {\r\n        position = position || 0;\r\n        previousVideoPosition = previousVideoPosition || 0;\r\n        this._timelineProvider.stop();\r\n        this._cleanUpTimeline().then(() => {\r\n            const timelineConfig = this._configuration.timelines[index];\r\n            this._currentTimelineUri = timelineConfig.uri;\r\n            this._timelineProvider.loop = timelineConfig.loop;\r\n            if ((!this._timelineProvider.loop) && (position > 0)) {\r\n                this._timelineProvider.once(TimelineEventNames.FIRST_FRAME, () => {\r\n                    this._timelineProvider.pause();\r\n                    this._eventbus.broadcastForTopic(TimelineEventNames.DURATION, this._timelineProvider.playerid, [this.getDuration()]);\r\n                    this._executeStartActions().then(() => {\r\n                        this._timelineProvider.seek(position);\r\n                        this._onSeekHandler(Math.floor, { offset: position });\r\n                    });\r\n                });\r\n            }\r\n            this._timelineProvider.playlistItem(index);\r\n        });\r\n    }\r\n\r\n    _cleanUpTimeline() {\r\n        return this._executeRelevantActions(this._getActiveActions, \"end\");\r\n    }\r\n\r\n    _executeStartActions() {\r\n        return this._executeRelevantActions(this._getActionsForPosition.bind(this, 0), \"start\");\r\n    }\r\n\r\n    _getActionsForPosition(position, allActions) {\r\n        return allActions.filter((action) => {\r\n            return (!action.active) && ((action.duration.start <= position) && (action.duration.end >= position));\r\n        });\r\n    }\r\n\r\n    _getActiveActions(allActions) {\r\n        const actions = allActions.filter((action) => {\r\n            return action.active;\r\n        });\r\n        return actions.sort((a, b) => {\r\n            if (b.duration.start < a.duration.start) {\r\n                return -1;\r\n            } else if (b.duration.start > a.duration.start) {\r\n                return 1;\r\n            } else {\r\n                return 0;\r\n            }\r\n        });\r\n    }\r\n\r\n    _executeRelevantActions(filter, executionType) {\r\n        const timelineActions = this._getRelevantTimelineActions();\r\n        const currentActions = filter.apply(this, [timelineActions]);\r\n        return this._executeActions(currentActions, executionType, 0);\r\n    }\r\n\r\n    _handleRequestTimelinePosition(resultCallback) {\r\n        resultCallback(Math.floor(this._timelineProvider.getPosition()));\r\n    }\r\n\r\n    _handleTimelineComplete() {\r\n        this._cleanUpTimeline();\r\n    }\r\n\r\n    _handleExecuteTimelineAction(uri, index, start) {\r\n        const actions = this._getTimelineActionsForUri(uri);\r\n        const action = (actions) ? actions[index] : null;\r\n        if (action) {\r\n            if (start) {\r\n                action.start();\r\n            } else {\r\n                action.end();\r\n            }\r\n        }\r\n    }\r\n\r\n    _resizeTimelineAction(uri, index) {\r\n        const actions = this._getTimelineActionsForUri(uri);\r\n        const action = (actions) ? actions[index] : null;\r\n        if (action) {\r\n            action.resize();\r\n        }\r\n    }\r\n\r\n    _getRelevantTimelineActions() {\r\n        return this._getTimelineActionsForUri(this._currentTimelineUri);\r\n    }\r\n\r\n    _getTimelineActionsForUri(uri) {\r\n        let timelineActions;\r\n        this._configuration.timelines.some((timelineInfo) => {\r\n            if (timelineInfo.uri === uri) {\r\n                timelineActions = timelineInfo.timelineActions;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return timelineActions;\r\n    }\r\n\r\n    _onTimeHandler(floor, event) {\r\n        if (!isNaN(event.position)) {\r\n            const pos = floor(event.position);\r\n            if (this._lastPosition !== pos) {\r\n                this._executeActionsForPosition(pos);\r\n                this._eventbus.broadcastForTopic(TimelineEventNames.POSITION_UPDATE, this._timelineProvider.playerid, [pos, this._timelineProvider.getDuration()]);\r\n            }\r\n            this._eventbus.broadcastForTopic(TimelineEventNames.TIME_UPDATE, this._timelineProvider.playerid, [event.position, this._timelineProvider.getDuration()]);\r\n        }\r\n    }\r\n\r\n    _onSeekHandler(floor, event) {\r\n        const pos = floor(event.offset);\r\n        if (isNaN(pos)) {\r\n            return;\r\n        }\r\n        this._executeSeekActions(pos).then(() => {\r\n            this._timelineProvider.play();\r\n        });\r\n    }\r\n\r\n    _executeActionsForPosition(position) {\r\n        this._lastPosition = position;\r\n        const actions = this._timeLineActionsLookup[this._currentTimelineUri];\r\n        if (actions) {\r\n            const executions = actions[position];\r\n            if (executions) {\r\n                executions.forEach((exec) => {\r\n                    exec();\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    _executeSeekActions(pos) {\r\n        const timelineActions = this._getRelevantTimelineActions();\r\n        const currentActions = this._getActiveActions(timelineActions);\r\n        const newActions = this._getActionsForPosition(pos, timelineActions);\r\n\r\n        const promise = this._executeActions(currentActions, \"end\", 0);\r\n\r\n        return new Promise((resolve) => {\r\n            promise.then(() => {\r\n                this._executeActions(newActions, \"start\", 0).then(() => {\r\n                    resolve();\r\n                });\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport default ChronoTriggerEngine;\r\n","import { TimelineAction, EndableAction, Action } from '../action';\r\nimport getNestedPropertyValue from '../operation/helper/getNestedPropertyValue';\r\n\r\nclass ConfigurationResolver {\r\n\r\n    constructor(importer, eventbus) {\r\n        this.importer = importer;\r\n        this.eventbus = eventbus;\r\n    }\r\n\r\n    importSystemEntry(systemName) {\r\n        return this.importer.import(systemName)[systemName];\r\n    }\r\n\r\n    process(actionRegistryListener, configuration) {\r\n        const actionsLookup = {};\r\n        this.processConfiguration(configuration, configuration);\r\n        this.resolveOperations(configuration);\r\n        this.initializeTimelineActions(configuration);\r\n        this.initializeInitActions(configuration, actionsLookup);\r\n        this.initializeActions(configuration, actionsLookup);\r\n        this.initializeEventActions(actionRegistryListener, configuration);\r\n        return actionsLookup;\r\n    }\r\n\r\n    initializeEventActions(actionRegistryListener, config) {\r\n        if ((actionRegistryListener) && (config.eventActions)) {\r\n            config.eventActions.forEach((actionData) => {\r\n                const eventAction = new Action(actionData, this.eventbus);\r\n                actionRegistryListener.registerAction(eventAction, actionData.eventName, actionData.eventTopic);\r\n            });\r\n            delete config.eventActions;\r\n        }\r\n    }\r\n\r\n    initializeActions(config, actionsLookup) {\r\n        if (config.actions) {\r\n            config.actions.forEach((actionData) => {\r\n                const action = new EndableAction(actionData, this.eventbus);\r\n                actionsLookup[actionData.name] = action;\r\n            });\r\n            delete config.actions;\r\n        }\r\n    }\r\n\r\n    initializeInitActions(config, actionsLookup) {\r\n        if (!config.initActions) {\r\n            return;\r\n        }\r\n        config.initActions = config.initActions.map((actionData) => {\r\n            const initAction = new EndableAction(actionData, this.eventbus);\r\n            actionsLookup[actionData.name] = initAction;\r\n            return initAction;\r\n        });\r\n    }\r\n\r\n    initializeTimelineActions(config) {\r\n        if (config.timelines) {\r\n            config.timelines.forEach(this.initializeTimelineAction.bind(this));\r\n        }\r\n    }\r\n\r\n    initializeTimelineAction(timelineConfig) {\r\n        if (!timelineConfig.timelineActions) {\r\n            return;\r\n        }\r\n        timelineConfig.timelineActions = timelineConfig.timelineActions.map((actionData) => {\r\n            const timelineAction = new TimelineAction(actionData, this.eventbus);\r\n            if (!timelineAction.endOperations) {\r\n                timelineAction.endOperations = [];\r\n            }\r\n            return timelineAction;\r\n        });\r\n    }\r\n\r\n    resolveOperations(config) {\r\n        const timelineOperations = [];\r\n        if (config.timelines) {\r\n            config.timelines.forEach((timelineInfo) => {\r\n                timelineOperations.push(...this._gatherOperations(timelineInfo.timelineActions));\r\n            });\r\n        }\r\n\r\n        const systemNameHolders = this._gatherOperations(config.initActions)\r\n                                    .concat(timelineOperations)\r\n                                    .concat(this._gatherOperations(config.actions))\r\n                                    .concat(this._gatherOperations(config.eventActions));\r\n\r\n        systemNameHolders.forEach((holder)=> {\r\n            holder.instance = this.importSystemEntry(holder.systemName);\r\n        });\r\n    }\r\n\r\n    processConfiguration(config, parentConfig) {\r\n        if (config == null) {\r\n            return;\r\n        }\r\n        if (config.constructor === Array) {\r\n            for (let i = 0, ii = config.length; i < ii; i++) {\r\n                this.processConfiguration(config[i], parentConfig);\r\n            }\r\n        } else {\r\n            Object.keys(config).forEach((key) => {\r\n                this.processConfigProperty(key, config, parentConfig);\r\n            });\r\n        }\r\n    }\r\n\r\n    processConfigProperty(key, config, parentConfig) {\r\n        const value = config[key];\r\n        if (typeof value === 'string') {           \r\n            if ((value.startsWith('config:'))) {\r\n                const configProperty = value.substr(7, value.length);\r\n                config[key] = getNestedPropertyValue(configProperty, parentConfig);\r\n            }\r\n            else if ((value.startsWith('template:'))) {\r\n                const templateKey = value.substr(9, value.length);\r\n                config[key] = this.importSystemEntry(templateKey);\r\n            }\r\n            else if ((value.startsWith('json:'))) {\r\n                const jsonKey = value.substr(5, value.length);\r\n                const json = this.importSystemEntry(jsonKey);\r\n                config[key] = json;\r\n            }\r\n        } else if (typeof value === 'object') {\r\n            this.processConfiguration(config[key], parentConfig);\r\n        }\r\n    }\r\n\r\n    _gatherOperations(actions) {\r\n        let result = [];\r\n        if (!actions) {\r\n            return result;\r\n        }\r\n        actions.forEach((action) => {\r\n            if (action.endOperations) {\r\n                result = result.concat(action.startOperations.concat(action.endOperations));\r\n            } else {\r\n                result = result.concat(action.startOperations);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n}\r\n\r\nexport default ConfigurationResolver;\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from \"../timeline-event-names\";\r\nimport deepcopy from '../operation/helper/deepcopy';\r\n\r\nclass EventListenerController {\r\n\r\n\tconstructor() {\r\n\t\tthis.operationData = null;\r\n\t\tthis.actionInstanceInfos = null;\r\n\t\tthis.name = \"EventListenerController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.operationData = {\r\n\t\t\tselectedElement: operationData.selectedElement,\r\n\t\t\teventName: operationData.eventName,\r\n\t\t\tactions: operationData.actions.slice(),\r\n\t\t\tactionOperationData: operationData.actionOperationData ? deepcopy(operationData.actionOperationData) : undefined\r\n\t\t}\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tconst { selectedElement, actions, eventName } = this.operationData;\r\n\t\tif (!this.actionInstanceInfos) {\r\n\t\t\tthis.actionInstanceInfos = [];\r\n\t\t\tactions.forEach((actionName) => {\r\n\t\t\t\tconst [isStart, name] = this._isStartAction(actionName);\r\n\t\t\t\tconst resultCallback = (actionInstance) => {\r\n\t\t\t\t\tthis.actionInstanceInfos.push({ start: isStart, action: actionInstance });\r\n\t\t\t\t};\r\n\r\n\t\t\t\teventbus.broadcast(TimelineEventNames.REQUEST_ACTION, [name, resultCallback]);\r\n\t\t\t});\r\n\t\t\tif (this._getElementTagName(selectedElement) === \"SELECT\") {\r\n\t\t\t\tselectedElement.on(eventName, this._selectEventHandler.bind(this));\r\n\t\t\t} else {\r\n\t\t\t\tselectedElement.on(eventName, this._eventHandler.bind(this));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_getElementTagName(element) {\r\n\t\tconst tagName = (element.length) ? element[0].tagName : element.tagName;\r\n\t\treturn tagName.toUpperCase();\r\n\t}\r\n\r\n\t_isStartAction(actionName) {\r\n\t\tconst prefix = actionName.substr(0, \"end:\".length);\r\n\t\tif (prefix === \"end:\") {\r\n\t\t\treturn [false, actionName.substr(\"end:\".length)];\r\n\t\t} else {\r\n\t\t\treturn [true, actionName];\r\n\t\t}\r\n\t}\r\n\r\n\t_eventHandler(event) {\r\n\t\tconst copy = (this.operationData.actionOperationData) ? deepcopy(this.operationData.actionOperationData) : {};\r\n\t\tif (event.target) {\r\n\t\t\tcopy.targetValue = event.target.value;\r\n\t\t}\r\n\t\tthis._executeAction(this.actionInstanceInfos, copy, 0);\r\n\t}\r\n\r\n\t_executeAction(actions, operationData, idx) {\r\n\t\tif (idx < actions.length) {\r\n\t\t\tconst actionInfo = actions[idx];\r\n\t\t\tconst { action } = actionInfo;\r\n\t\t\tconst method = (actionInfo.start) ? action.start.bind(action) : action.end.bind(action);\r\n\t\t\tmethod(operationData)\r\n\t\t\t\t.then((resultOperationData) => {\r\n\t\t\t\t\treturn this._executeAction(actions, Object.assign(operationData, resultOperationData), ++idx);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_selectEventHandler(event) {\r\n\t\tconst options = event.target;\r\n\t\tfor (let i = 0, l = options.length; i < l; i++) {\r\n\t\t\tconst opt = options[i];\r\n\t\t\tif (opt.selected) {\r\n\t\t\t\tconst copy = (this.operationData.actionOperationData) ? deepcopy(this.operationData.actionOperationData) : {};\r\n\t\t\t\tthis._executeAction(this.actionInstanceInfos, Object.assign({ eventArgs: [opt.value] }, copy), 0);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.operationData.selectedElement.off(this.operationData.eventName);\r\n\t}\r\n\r\n}\r\n\r\nexport default EventListenerController;\r\n","import TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass LabelController {\r\n\r\n\tconstructor() {\r\n\t\tthis.listeners = [];\r\n\t\tthis.currentLanguage = null;\r\n\t\tthis.operationData = null;\r\n\t\tthis.labelData = {};\r\n\t\tthis.name = \"LabelController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.operationData = Object.assign({},operationData);\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\teventbus.broadcast(TimelineEventNames.REQUEST_CURRENT_LANGUAGE, [(language)=> {\r\n\t\t\tthis.currentLanguage = language;\r\n\t\t}]);\r\n\t\teventbus.broadcast(TimelineEventNames.REQUEST_LABEL_COLLECTION, [this.operationData.labelId, (labelCollection)=> {\r\n\t\t\tthis.createTextDataLookup(labelCollection);\r\n\t\t}]);\r\n\t\tthis.setLabel();\r\n\t\tthis.listeners.push(eventbus.on(TimelineEventNames.LANGUAGE_CHANGE, this.handleLanguageChange.bind(this)));\r\n\t}\r\n\r\n\tsetLabel() {\r\n\t\tthis.operationData.selectedElement.html(this.labelData[this.currentLanguage]);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.listeners.forEach((func) => {\r\n\t\t\tfunc();\r\n\t\t});\r\n\t}\r\n\r\n\thandleLanguageChange(code) {\r\n\t\tthis.currentLanguage = code;\r\n\t\tthis.setLabel();\r\n\t}\r\n\r\n\tcreateTextDataLookup(data) {\r\n\t\tdata.forEach((d) => {\r\n\t\t\tthis.labelData[d.code] = d.label;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport default LabelController;\r\n","import lottie from 'lottie-web';\r\nimport TimelineEventNames from '../timeline-event-names';\r\n\r\nclass LottieController {\r\n\r\n\tconstructor() {\r\n\t\tthis.name = \"LottieController\";\r\n\t\tthis.currentLanguage = null;\r\n\t\tthis.labelData = {};\r\n\t\tthis.listeners = [];\r\n\t\tthis.anim = null;\r\n\t\tthis.operationData = null;\r\n\t\tthis.serializedData = null;\r\n\t\tthis.serializedIEData = null;\r\n\t\tthis.animationData = null;\r\n\t\tthis.freezePosition = -1;\r\n\t\tthis.endPosition = -1;\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.operationData = {\r\n\t\t\tselectedElement: operationData.selectedElement,\r\n\t\t\trenderer: operationData.renderer,\r\n\t\t\tloop: operationData.loop,\r\n\t\t\tautoplay: operationData.autoplay,\r\n\t\t\tanimationData: operationData.animationData,\r\n\t\t\tjson: operationData.json,\r\n\t\t\tlabelIds: operationData.labelIds,\r\n\t\t\tviewBox: operationData.viewBox\r\n\t\t};\r\n\t\tif (operationData.url.indexOf(\"[\") > -1) {\r\n\t\t\tthis.parseFilename(operationData.url);\r\n\t\t}\r\n\t\tthis.serializedData = this.operationData.json\r\n\t\t\t? JSON.stringify(this.operationData.json)\r\n\t\t\t: JSON.stringify(this.operationData.animationData);\r\n\t\tif (this.operationData.iefallback) {\r\n\t\t\tthis.serializedIEData = JSON.stringify(this.operationData.iefallback);\r\n\t\t}\r\n\t}\r\n\r\n\tparseFilename(name) {\r\n\t\tconst params = name.substr(name.indexOf(\"[\") + 1, name.indexOf(\"]\") - name.indexOf(\"[\") - 1);\r\n\t\tconst settings = params.split(\",\");\r\n\t\tsettings.forEach((setting) => {\r\n\t\t\tconst values = setting.split(\"=\");\r\n\t\t\tif (values[0] === \"freeze\") {\r\n\t\t\t\tthis.freezePosition = +values[1];\r\n\t\t\t} else if (values[0] === \"end\") {\r\n\t\t\t\tthis.endPosition = +values[1];\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tconst { labelIds } = this.operationData; \r\n\t\tif ((labelIds) && (labelIds.length)) {\r\n\t\t\tconst resultHolder = {};\r\n\t\t\t\r\n\t\t\teventbus.broadcast(TimelineEventNames.REQUEST_CURRENT_LANGUAGE, [resultHolder]);\r\n\t\t\tthis.currentLanguage = resultHolder.language;\r\n\t\t\tthis.listeners.push(eventbus.on(TimelineEventNames.LANGUAGE_CHANGE, this.handleLanguageChange.bind(this)));\r\n\t\t\teventbus.broadcast(TimelineEventNames.REQUEST_LABEL_COLLECTIONS, [this.operationData.labelIds, resultHolder]);\r\n\t\t\tthis.createTextDataLookup(resultHolder.labelCollections);\r\n\t\t}\r\n\t\tthis.createAnimation();\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.listeners.forEach((func) => {\r\n\t\t\tfunc();\r\n\t\t});\r\n\t\tif (this.anim) {\r\n\t\t\tif (this.endPosition > -1) {\r\n\t\t\t\tthis.anim.onComplete = this.destroy.bind(this);\r\n\t\t\t\tthis.anim.playSegments([this.freezePosition, this.endPosition], true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.anim.destroy();\r\n\t\t\t}\r\n\t\t}\r\n  }\r\n    \r\n\tdestroy() {\r\n\t\tif (this.anim) {\r\n\t\t\tthis.anim.destroy();\r\n\t\t\tthis.anim = null;\r\n\t\t}\r\n\t}\r\n\r\n\tcreateAnimation() {\r\n\t\tif (this.anim) {\r\n\t\t\tthis.anim.destroy();\r\n\t\t}\r\n\t\tlet serialized = (this.isIE()) ? this.serializedIEData : this.serializedData;\r\n\r\n\t\tconst { labelIds } = this.operationData;\r\n\t\tif (labelIds && labelIds.length) {\r\n\t\t\tlabelIds.forEach((id) => {\r\n\t\t\t\tserialized = serialized.split(`!!${id}!!`).join(this.labelData[id][this.currentLanguage]);\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst animData = JSON.parse(serialized);\r\n\r\n\t\tconst animationData = {\r\n\t\t\tautoplay: this.operationData.autoplay,\r\n\t\t\tcontainer: this.operationData.selectedElement[0],\r\n\t\t\tloop: this.operationData.loop,\r\n\t\t\trenderer: this.operationData.renderer,\r\n\t\t\tanimationData:animData\r\n\t\t}\r\n\r\n\t\tthis.anim = lottie.loadAnimation(animationData);\r\n\t\tif (this.endPosition < 0) {\r\n\t\t\tthis.endPosition = this.anim.timeCompleted;\r\n\t\t}\r\n\r\n\t\tif (this.freezePosition > -1) {\r\n\t\t\tthis.anim.playSegments([0, this.freezePosition], true);\r\n\t\t}\r\n\t\tif (this.operationData.viewBox) {\r\n\t\t\tthis.operationData.selectedElement.find(\"svg\").attr('viewBox', this.operationData.viewBox);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateTextDataLookup(data) {\r\n\t\tdata.forEach((infos, index) => {\r\n\t\t\tinfos.forEach((d) => {\r\n\t\t\t\tthis.labelData[this.operationData.labelIds[index]][d.code] = d.label;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\thandleLanguageChange(code) {\r\n\t\tthis.currentLanguage = code;\r\n\t\tthis.createAnimation();\r\n\t}\r\n\r\n\tisIE() {\r\n\t\tconst isIE = false || !!document['documentMode'];\r\n\r\n\t\t// Edge 20+\r\n\t\tconst isEdge = !isIE && !!window['StyleMedia'];\r\n\r\n\t\treturn isEdge || isIE;\r\n\t}\r\n\r\n}\r\n\r\nexport default LottieController;\r\n","import $ from 'jquery';\r\n\r\nclass NavigationController {\r\n\r\n\tconstructor() {\r\n\t\tthis.name = 'NavigationController';\r\n\t\tthis.playerId = null;\r\n\t\tthis.navigation = null;\r\n\t\tthis.navLookup = {};\r\n\t\tthis.navVidIdLookup = {};\r\n\t\tthis.ctrlLookup = {};\r\n\t\tthis.activeNavigationPoint = null;\r\n\t\tthis.labelControllers = null;\r\n\t\tthis.eventhandlers = null;\r\n\t\tthis.eventbus = null;\r\n\t\tthis.container = null;\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.container = operationData.selectedElement;\r\n\t\tthis.playerId = operationData.playerId;\r\n\t\tthis.navigation = this.buildNavigationData(operationData.json);\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tthis.eventhandlers = [];\r\n\t\tthis.labelControllers = [];\r\n\t\tthis.eventhandlers.push(eventbus.on('navigate-to-video-url', this.handleNavigateVideoUrl.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on('highlight-navigation', this.highlightMenu.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on('request-current-navigation', this.handleRequestCurrentNavigation.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on('video-complete', this.handleVideoComplete.bind(this), this.playerId));\r\n\t\tthis.eventbus = eventbus;\r\n\r\n        this.buildHtml(this.container, this.navigation);\r\n        this.initHistory.bind(this);\r\n\t}\r\n\r\n\tinitHistory() {\r\n\t\tthis.activeNavigationPoint = this.navVidIdLookup[0];\r\n\t\tconst navId = this.getQueryVariable(0);\r\n\t\tlet videoIndex = 0;\r\n\t\tif (navId) {\r\n\t\t\tconst nav = this.navLookup[navId];\r\n\t\t\tvideoIndex = nav.videoUrlIndex;\r\n\t\t}\r\n\t\tthis.highlightMenu(videoIndex);\r\n\t}\r\n\r\n\tgetQueryVariable(variableIdx) {\r\n\t\tconst href = window.location.href;\r\n\t\tconst hashIndex = href.indexOf('#');\r\n\t\tif (hashIndex > -1) {\r\n\t\t\tconst query = href.substring(hashIndex + 2);\r\n\t\t\tif (query) {\r\n\t\t\t\tconst vars = query.split('/');\r\n\t\t\t\treturn vars[variableIdx];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\thandleRequestCurrentNavigation(resultCallback) {\r\n\t\tresultCallback({\r\n\t\t\tnavigationData: this.activeNavigationPoint,\r\n\t\t\ttitle: this.ctrlLookup[this.activeNavigationPoint.labelId].labelData[this.ctrlLookup[this.activeNavigationPoint.labelId].currentLanguage]\r\n\t\t});\r\n\t}\r\n\r\n\t detach(eventbus) {\r\n\t\tif (this.eventhandlers) {\r\n\t\t\tthis.eventhandlers.forEach((handler) => {\r\n\t\t\t\thandler();\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.labelControllers.forEach((ctrl) => {\r\n\t\t\tctrl.detach(eventbus);\r\n\t\t});\r\n\t\tthis.labelControllers.length = 0;\r\n\t\tthis.eventbus = null;\r\n\t\tthis.container = null;\r\n\t\twindow.onpopstate = null;\r\n\t}\r\n\r\n\tpushCurrentState(position = -1) {\r\n\t\tconst state = {\r\n\t\t\tnavigationData: this.activeNavigationPoint,\r\n\t\t\ttitle: this.ctrlLookup[this.activeNavigationPoint.labelId].labelData[this.ctrlLookup[this.activeNavigationPoint\r\n\t\t\t\t.labelId].currentLanguage]\r\n\t\t};\r\n\t\tif (position > -1) {\r\n\t\t\tstate.position = position;\r\n\t\t}\r\n\t\tthis.eventbus.broadcast('push-history-state',[state]);\r\n\t}\r\n\r\n\tbuildHtml(parentElm, data) {\r\n\t\tconst ul = $('<ul/>');\r\n\t\tdata.forEach(this.addNavElement.bind(this, ul));\r\n\t\tparentElm.append(ul);\r\n\t}\r\n\r\n\taddNavElement(parentElm, data) {\r\n\t\tif (data.visible) {\r\n\t\t\tconst li = $('<li/>');\r\n\t\t\tconst a = $(`<a href='javascript:;' id='nav_${data.videoUrlIndex}'/>`);\r\n\t\t\tli.append(a);\r\n\t\t\tthis.addLabel(a, data.labelId);\r\n\t\t\tthis.addClickHandler(a, data.videoUrlIndex);\r\n\t\t\tif (data.children) {\r\n\t\t\t\tconst ul = $('<ul/>');\r\n\t\t\t\tdata.children.forEach(this.addNavElement.bind(this, ul));\r\n\t\t\t\tli.append(ul);\r\n\t\t\t}\r\n\t\t\tparentElm.append(li);\r\n\t\t}\r\n\t}\r\n\r\n\taddClickHandler(parentElm, videoIndex) {\r\n\t\tparentElm.mouseup(this.menuMouseupHandler.bind(this, videoIndex));\r\n\t}\r\n\r\n\tmenuMouseupHandler(videoIndex) {\r\n\t\tconst navdata = this.navVidIdLookup[videoIndex];\r\n\t\tif (navdata) {\r\n\t\t\tthis.eventbus.broadcast('request-video-url', [navdata.videoUrlIndex]);\r\n\t\t\tthis.handleNavigateVideoUrl(navdata.videoUrlIndex);\r\n\t\t}\r\n\t}\r\n\r\n\thandleNavigateVideoUrl(index, requestedVideoPosition) {\r\n        requestedVideoPosition = (requestedVideoPosition) ? requestedVideoPosition : 0;\r\n\t\tthis.highlightMenu(index);\r\n\t\tthis.eventbus.broadcast('request-video-url', [index, requestedVideoPosition]);\r\n\t\tthis.activeNavigationPoint = this.navVidIdLookup[index];\r\n\t\tthis.pushCurrentState(requestedVideoPosition);\r\n\t}\r\n\r\n\thighlightMenu(index) {\r\n\t\tconst navElm = $(`#nav_${index}`);\r\n\t\tif (navElm.length) {\r\n\t\t\t$('.current-menu-item').removeClass('current-menu-item');\r\n\t\t\tnavElm.addClass('current-menu-item');\r\n\t\t}\r\n\t}\r\n\r\n\thandleVideoComplete(index) {\r\n\t\tconsole.log('Navigation controller received video complete');\r\n\t\tconst navData = this.navVidIdLookup[index];\r\n\t\tif (navData.autoNext) {\r\n\t\t\tconsole.log('NavigationController.handleVideoComplete - request-video-url: ' + navData.next.videoUrlIndex);\r\n\t\t\tthis.eventbus.broadcast('request-video-url', [navData.next.videoUrlIndex]);\r\n\t\t} else {\r\n\t\t\tconsole.log('handleVideoComplete - request-video-cleanup');\r\n\t\t\tthis.eventbus.broadcast('request-video-cleanup');\r\n\t\t}\r\n\t}\r\n\r\n\taddLabel(parentElm, labelId) {\r\n\t\tconst data = {\r\n\t\t\t\tselectedElement: parentElm,\r\n\t\t\t\tlabelId: labelId\r\n\t\t\t};\r\n\t\tconst resultCallback = (instance)=> {\r\n            instance.init(data);\r\n            instance.attach(this.eventbus);\r\n            this.labelControllers.push(instance);\r\n            this.ctrlLookup[labelId] = instance;\r\n\t\t};\r\n\t\tthis.eventbus.broadcast('request-instance', ['LabelController', resultCallback]);\r\n\t}\r\n\r\n\tbuildNavigationData(data) {\r\n\t\tconst result = [];\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tthis.navLookup[nav.id] = nav;\r\n\t\t\tthis.navVidIdLookup[nav.videoUrlIndex] = nav;\r\n\t\t\tnav.previous = data.navigationData[index - 1];\r\n\t\t});\r\n\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tif (nav.nextId) {\r\n\t\t\t\tnav.next = this.navLookup[nav.nextId];\r\n\t\t\t\tdelete nav.nextId;\r\n\t\t\t} else {\r\n\t\t\t\tnav.next = data.navigationData[index + 1];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdata.roots.forEach((id) => {\r\n\t\t\tconst nav = this.navLookup[id];\r\n\t\t\tif (nav.children) {\r\n\t\t\t\tnav.children = nav.children.map((id) => {\r\n\t\t\t\t\treturn this.navLookup[id];\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tresult.push(nav);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nexport default NavigationController;\r\n","import TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass ProgressbarController {\r\n\r\n\tconstructor() {\r\n\t\tthis.selectedElement = null;\r\n\t\tthis.textElement = null;\r\n\t\tthis.detachers = [];\r\n\t\tthis.name = \"ProgressbarController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.selectedElement = operationData.selectedElement;\r\n\t\tthis.textElement = operationData.textElement;\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tconst callBack = (providerId) => {\r\n\t\t\tthis.detachers.push(eventbus.on(TimelineEventNames.POSITION_UPDATE, this.positionUpdateHandler.bind(this), providerId));\r\n\t\t}\r\n\t\teventbus.broadcast(TimelineEventNames.PROVIDERID_REQUEST, [callBack]);\r\n\r\n\t\tconst clickHandler = this.clickHandler.bind(this);\r\n\t\tthis.selectedElement.on(\"click\", clickHandler);\r\n\t\tthis.detachers.push(()=> this.selectedElement.off(\"click\"), clickHandler);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.detacher.forEach((func)=> {\r\n\t\t\tfunc();\r\n\t\t});\r\n\t}\r\n\r\n\tpositionUpdateHandler({position, duration}) {\r\n\t\tlet perc = (100 / duration) * position;\r\n\t\tif (this.selectedElement) {\r\n\t\t\tthis.selectedElement.css(\"width\", `${perc}%`);\r\n\t\t}\r\n\t\tperc = Math.floor(perc);\r\n\t\tif (this.textElement) {\r\n\t\t\tthis.textElement.text(`${perc}%`);\r\n\t\t}\r\n\t}\r\n\r\n\tclickHandler() {\r\n\r\n\t}\r\n}\r\n\r\nexport default ProgressbarController;\r\n","class RoutingController {\r\n\r\n\tconstructor() {\r\n\t\tthis.navLookup = {};\r\n\t\tthis.navVidIdLookup = {};\r\n\t\tthis.playerId = null;\r\n\t\tthis.navigation = null;\r\n\t\tthis.eventhandlers = [];\r\n\t\tthis.eventbus = null;\r\n\t\tthis.name = \"RoutingController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.navigation = this.buildNavigationData(operationData.json);\r\n\t\tthis.playerId = operationData.playerId;\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tthis.eventhandlers.push(eventbus.on(\"before-request-video-url\", this.handleBeforeRequestVideoUrl.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on(\"push-history-state\", this.handlePushHistoryState.bind(this)));\r\n\t\tthis.eventbus = eventbus;\r\n\t\twindow.onpopstate = this.handlePopstate.bind(this);\r\n\r\n\t\tconst navId = this.getQueryVariable(0);\r\n\t\tif (navId) {\r\n\t\t\tconst nav = this.navLookup[navId];\r\n\t\t\tlet pos = this.getQueryVariable(1);\r\n\t\t\tpos = (pos) ? +pos : 0;\r\n\t\t\tthis.eventbus.broadcast(\"request-video-url\", [nav.videoUrlIndex, pos, true]);\r\n\t\t} else {\r\n\t\t\twindow.history.pushState({ navigationId: this.navigation[0].id },\r\n\t\t\t\t\"\",\r\n\t\t\t\t`#/${this.navigation[0].id}`);\r\n\t\t}\r\n\t}\r\n\r\n\thandlePopstate(event) {\r\n\t\tconst navigationId = (event.state) ? event.state.navigationId : this.navigation[0].id;\r\n\t\tconst position = (event.state) ? event.state.position : 0;\r\n\t\tconst nav = this.navLookup[navigationId];\r\n\t\tthis.eventbus.broadcast(\"highlight-navigation\", [nav.videoUrlIndex]);\r\n\t\tthis.eventbus.broadcast(\"request-video-url\", [nav.videoUrlIndex, position, true]);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tif (this.eventhandlers) {\r\n\t\t\tthis.eventhandlers.forEach((handler) => {\r\n\t\t\t\thandler();\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.eventbus = null;\r\n\t}\r\n\r\n\thandleBeforeRequestVideoUrl(index, requestedVideoPosition, isHistoryRequest) {\r\n        requestedVideoPosition = (requestedVideoPosition) ? requestedVideoPosition : 0;\r\n        isHistoryRequest = (isHistoryRequest !== undefined) ? isHistoryRequest : false;\r\n\t\tif (!isHistoryRequest) {\r\n            const resultCallback = (item)=> {\r\n                this.pushState(item);\r\n            };\r\n\t\t\tthis.eventbus.broadcast(\"request-current-navigation\", [resultCallback]);\r\n\t\t}\r\n\t}\r\n\r\n\tgetQueryVariable(variableIdx) {\r\n\t\tconst href = window.location.href;\r\n\t\tconst hashIndex = href.indexOf(\"#\");\r\n\t\tif (hashIndex > -1) {\r\n\t\t\tconst query = href.substring(hashIndex + 2);\r\n\t\t\tif (query) {\r\n\t\t\t\tconst vars = query.split(\"/\");\r\n\t\t\t\treturn vars[variableIdx];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\thandlePushHistoryState(state) {\r\n\t\tthis.pushState(state);\r\n\t}\r\n\r\n\tpushState(state) {\r\n\t\tif ((state) && (state.navigationData) && (state.navigationData.visible)) {\r\n\t\t\tlet currentPosition = (state.position !== undefined) ? state.position : -1;\r\n\t\t\tif (currentPosition < 0) {\r\n\t\t\t\tconst resultCallback = (position)=> {\r\n                    currentPosition = (position > 3) ? (position - 3) : 0;\r\n                };\r\n\t\t\t\tthis.eventbus.broadcast(\"request-current-video-position\", [resultCallback]);\r\n\t\t\t}\r\n\r\n\t\t\tconst currentState = window.history.state;\r\n\t\t\tif ((currentState) && (currentState.navigationId !== state.navigationData.id)) {\r\n\t\t\t\twindow.history.pushState({ navigationId: state.navigationData.id, position: currentPosition },\r\n\t\t\t\t\tstate.title,\r\n\t\t\t\t\t`#/${state.navigationData.id}/${currentPosition}`);\r\n\t\t\t} else if ((currentState) && (currentState.navigationId === state.navigationData.id)) {\r\n\t\t\t\twindow.history.replaceState({ navigationId: currentState.navigationId, position: currentPosition },\r\n\t\t\t\t\tstate.title,\r\n\t\t\t\t\t`#/${currentState.navigationId}/${currentPosition}`);\r\n\t\t\t} else {\r\n\t\t\t\twindow.history.pushState({ navigationId: state.navigationData.id, position: currentPosition },\r\n\t\t\t\t\tstate.title,\r\n\t\t\t\t\t`#/${state.navigationData.id}/${currentPosition}`);\r\n\t\t\t}\r\n\t\t\twindow.document.title = state.title;\r\n\t\t}\r\n\t}\r\n\r\n\tbuildNavigationData(data) {\r\n\t\tconst result = [];\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tthis.navLookup[nav.id] = nav;\r\n\t\t\tthis.navVidIdLookup[nav.videoUrlIndex] = nav;\r\n\t\t\tnav.previous = data.navigationData[index - 1];\r\n\t\t});\r\n\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tif (nav.nextId) {\r\n\t\t\t\tnav.next = this.navLookup[nav.nextId];\r\n\t\t\t\tdelete nav.nextId;\r\n\t\t\t} else {\r\n\t\t\t\tnav.next = data.navigationData[index + 1];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdata.roots.forEach((id) => {\r\n\t\t\tconst nav = this.navLookup[id];\r\n\t\t\tif (nav.children) {\r\n\t\t\t\tnav.children = nav.children.map((id) => {\r\n\t\t\t\t\treturn this.navLookup[id];\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tresult.push(nav);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n}\r\n\r\nexport default RoutingController;\r\n","import TimelineEventNames from '../timeline-event-names';\r\n\r\nclass SubtitlesController {\r\n\r\n\tconstructor() {\r\n\t\tthis.actionLookup = null;\r\n\t\tthis.currentLanguage = null;\r\n\t\tthis.lastFunc = null;\r\n\t\tthis.name = \"SubtitlesController\";\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tconst callBack = (providerId) => {\r\n\t\t\tconst detachTime = eventbus.on(TimelineEventNames.TIME, this.onTimeHandler.bind(this), providerId);\r\n\t\t\tconst detachLangChange = eventbus.on(TimelineEventNames.LANGUAGE_CHANGE, this.languageChangeHandler.bind(this));\r\n\t\t\tthis.internalDetach = this.internalDetach.bind(this, [detachTime, detachLangChange]);\r\n\t\t}\r\n\t\teventbus.broadcast(TimelineEventNames.PROVIDERID_REQUEST, [callBack]);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.internalDetach();\r\n\t}\r\n\r\n\tinternalDetach(detachMethods) {\r\n\t\tif (detachMethods) {\r\n\t\t\tdetachMethods.forEach((f) => {\r\n\t\t\t\tf();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tlanguageChangeHandler(newLanguage) {\r\n\t\tthis.currentLanguage = newLanguage;\r\n\t\tif (this.lastFunc) {\r\n\t\t\tthis.lastFunc();\r\n\t\t}\r\n\t}\r\n\r\n\tremoveTitle(container) {\r\n\t\tcontainer.text(\"\");\r\n\t\tthis.lastFunc = null;\r\n\t}\r\n\r\n\tonTimeHandler({ position }) {\r\n\t\tconst func = this.actionLookup[position];\r\n\t\tif (func) {\r\n\t\t\tfunc();\r\n\t\t\tthis.lastFunc = func;\r\n\t\t}\r\n\t}\r\n\r\n\tsetTitle(container, titleLanguageLookup) {\r\n\t\tcontainer.text(titleLanguageLookup[this.currentLanguage]);\r\n\t}\r\n\r\n\tcreateActionLookup(controllerData, container) {\r\n\t\tconst subtitleData = controllerData.subtitleData;\r\n\t\tconst titles = subtitleData[0].titles;\r\n\t\tconst subtitleTimeLookup = {};\r\n\t\tfor (let i = 0, ii = titles.length; i < ii; i++) {\r\n\t\t\tconst titleLanguageLookup = {};\r\n\t\t\tfor (let j = 0, jj = subtitleData.length; j < jj; j++) {\r\n\t\t\t\tconst subs = subtitleData[j];\r\n\t\t\t\ttitleLanguageLookup[subs.lang] = subs.titles[i].text;\r\n\t\t\t}\r\n\t\t\tsubtitleTimeLookup[titles[i].duration.start] = this.setTitle.bind(this, container, titleLanguageLookup);\r\n\t\t\tsubtitleTimeLookup[titles[i].duration.end] = this.removeTitle;\r\n\t\t}\r\n\t\treturn subtitleTimeLookup;\r\n\t}\r\n\r\n\tinit(controllerData) {\r\n\t\tconst container = controllerData.selectedElement;\r\n\t\tthis.removeTitle = this.removeTitle.bind(this, container);\r\n\t\tthis.currentLanguage = controllerData.language;\r\n\t\tthis.actionLookup = this.createActionLookup(controllerData, container);\r\n\t}\r\n}\r\n\r\nexport default SubtitlesController;\r\n","export { default as EventListenerController } from './EventListenerController';\r\nexport { default as LabelController } from './LabelController';\r\nexport { default as LottieController } from './LottieController';\r\nexport { default as NavigationController } from './NavigationController';\r\nexport { default as ProgressbarController } from './ProgressbarController';\r\nexport { default as RoutingController } from './RoutingController';\r\nexport { default as SubtitlesController } from './SubtitlesController';\r\n","import {\r\n    Eventbus,\r\n    ActionRegistryEventbusListener,\r\n    RequestVideoUriInterceptor\r\n} from './eventbus';\r\nimport $ from 'jquery';\r\nimport TimelineEventNames from './timeline-event-names';\r\nimport ConfigurationResolver from './configuration/configuration-resolver';\r\nimport Mousetrap from 'mousetrap';\r\n\r\nclass EngineFactory {\r\n\r\n    constructor(importer, windowRef, eventbus) {\r\n        this._init(importer, windowRef, eventbus);\r\n    }\r\n\r\n    _init(importer, windowRef, eventbus) {\r\n        this._resizeTimeout = -1;\r\n        this._actionsLookup = null;\r\n\r\n        this._importer = importer;\r\n\r\n        this._eventbus = eventbus || new Eventbus();\r\n        this._eventbus.on(TimelineEventNames.REQUEST_INSTANCE, this._requestInstanceHandler.bind(this));\r\n        this._eventbus.on(TimelineEventNames.REQUEST_ACTION, this._requestActionHandler.bind(this));\r\n        this._eventbus.on(TimelineEventNames.REQUEST_FUNCTION, this._requestFunctionHandler.bind(this));\r\n\r\n        $(windowRef).resize(this._resizeHandler.bind(this));\r\n    }\r\n\r\n    destroy() {\r\n        this._eventbus.clear();\r\n        this._eventbus = null;\r\n    }\r\n\r\n    _resizeHandler() {\r\n        if (this._resizeTimeout > -1) {\r\n            clearTimeout(this._resizeTimeout);\r\n        }\r\n        this._resizeTimeout = setTimeout(() => {\r\n            this._eventbus.broadcast(TimelineEventNames.RESIZE);\r\n        }, 200);\r\n    }\r\n\r\n    _importSystemEntryWithEventbusDependency(systemName) {\r\n        const ctor = this._importSystemEntry(systemName);\r\n        return new ctor(this._eventbus);\r\n    }\r\n\r\n    _importSystemEntry(systemName) {\r\n        return this._importer.import(systemName)[systemName];\r\n    }\r\n\r\n    _requestInstanceHandler(systemName, resultCallback) {\r\n        resultCallback(this._importSystemEntryWithEventbusDependency(systemName));\r\n    }\r\n\r\n    _requestFunctionHandler(systemName, resultCallback) {\r\n        resultCallback(this._importSystemEntry(systemName));\r\n    }\r\n\r\n    _requestActionHandler(systemName, resultCallback) {\r\n        const action = this._actionsLookup[systemName];\r\n        if (action) {\r\n            resultCallback(action);\r\n        } else {\r\n            console.error(`Unknown action: ${systemName}`);\r\n            resultCallback(null);\r\n        }\r\n    }\r\n\r\n    createEngine(configuration, resolver) {\r\n        const {\r\n            systemName\r\n        } = configuration.engine;\r\n        const engineClass = this._importSystemEntry(systemName);\r\n\r\n        let actionRegistryListener = null;\r\n        if ((configuration.eventActions) && (configuration.eventActions.length)) {\r\n            actionRegistryListener = new ActionRegistryEventbusListener();\r\n            this._eventbus.registerEventlistener(actionRegistryListener);\r\n        }\r\n\r\n        this._eventbus.registerInterceptor(TimelineEventNames.REQUEST_TIMELINE_URI, new RequestVideoUriInterceptor(this._eventbus));\r\n\r\n        resolver = resolver || new ConfigurationResolver(this._importer, this._eventbus);\r\n        this._actionsLookup = resolver.process(actionRegistryListener, configuration);\r\n\r\n        const timelineProviderClass = this._importSystemEntry(configuration.timelineProviderSettings.systemName);\r\n        const timelineProvider = new timelineProviderClass(this._eventbus, configuration);\r\n\r\n        Mousetrap.bind('space', event => {\r\n            event.preventDefault();\r\n            this._eventbus.broadcastForTopic(TimelineEventNames.PLAY_TOGGLE_REQUEST, timelineProvider.providerid);\r\n            return false;\r\n        });\r\n\r\n        const chronoTriggerEngine = new engineClass(configuration, this._eventbus, timelineProvider);\r\n        return chronoTriggerEngine;\r\n    }\r\n\r\n}\r\n\r\nexport default EngineFactory;","class ActionRegistryEventbusListener {\r\n\r\n\tconstructor() {\r\n\t\tthis.actionRegistry = {};\r\n\t}\r\n\r\n\tregisterAction(action, eventName, eventTopic) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tif (!this.actionRegistry[eventName]) {\r\n\t\t\tthis.actionRegistry[eventName] = [];\r\n\t\t}\r\n\t\tthis.actionRegistry[eventName].push(action);\r\n\t}\r\n\r\n\thandleEvent(eventName, eventTopic, args) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tconst actions = this.actionRegistry[eventName];\r\n\t\tif (actions) {\r\n\t\t\tconst operationData = {\r\n\t\t\t\teventArgs: args\r\n\t\t\t};\r\n\t\t\tactions.forEach((action) => {\r\n\t\t\t\taction.start(operationData);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ActionRegistryEventbusListener;\r\n","class Eventbus {\r\n\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.eventHandlers = {};\r\n\t\tthis.eventListeners = [];\r\n\t\tthis.eventInterceptors = {};\r\n\t}\r\n\r\n\t_getEventInterceptors(eventName, eventTopic) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tif (!this.eventInterceptors[eventName]) {\r\n\t\t\tthis.eventInterceptors[eventName] = [];\r\n\t\t}\r\n\t\treturn this.eventInterceptors[eventName];\r\n\t}\r\n\r\n\t_getEventHandlers(eventName, eventTopic) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tif (!this.eventHandlers[eventName]) {\r\n\t\t\tthis.eventHandlers[eventName] = [];\r\n\t\t}\r\n\t\treturn this.eventHandlers[eventName];\r\n\t}\r\n\r\n\ton(eventName, eventHandler, eventTopic) {\r\n\t\tthis._getEventHandlers(eventName, eventTopic).push(eventHandler);\r\n\t\treturn () => {\r\n\t\t\tthis.off(eventName, eventHandler, eventTopic);\r\n\t\t}\r\n\t}\r\n\r\n\tonce(eventName, eventHandler, eventTopic) {\r\n\t\tconst _this = this;\r\n\t\tconst eventHandlerDecorator = function() {\r\n\t\t\teventHandler(...arguments)\r\n\t\t\t_this.off(eventName, eventHandlerDecorator, eventTopic);\r\n\t\t};\r\n\t\tthis.on(eventName, eventHandlerDecorator, eventTopic);\r\n\t}\r\n\r\n\toff(eventName, eventHandler, eventTopic) {\r\n\t\tconst handlers = this._getEventHandlers(eventName, eventTopic);\r\n\t\tif (handlers) {\r\n\t\t\tconst idx = handlers.indexOf(eventHandler);\r\n\t\t\tif (idx > -1) {\r\n\t\t\t\thandlers.splice(idx, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tbroadcast(eventName, args) {\r\n\t\tthis._callHandlers(eventName, null, args);\r\n\t}\r\n\r\n\tbroadcastForTopic(eventName, eventTopic, args) {\r\n\t\tthis._callHandlers(eventName, eventTopic, args);\r\n\t}\r\n\r\n\tregisterEventlistener(eventbusListener) {\r\n\t\tthis.eventListeners.push(eventbusListener);\r\n\t}\r\n\r\n\tregisterInterceptor(eventName, interceptor, eventTopic) {\r\n\t\tconst interceptors = this._getEventInterceptors(eventName, eventTopic);\r\n\t\tinterceptors.push(interceptor);\r\n\t}\r\n\r\n\t_callHandlers(eventName, eventTopic, args=[]) {\r\n\t\tconst interceptors = this._getEventInterceptors(eventName, eventTopic);\r\n\t\tinterceptors.forEach((interceptor) => {\r\n\t\t\targs = interceptor.intercept(args);\r\n\t\t});\r\n\t\tthis.eventListeners.forEach((listener) => {\r\n\t\t\tlistener.handleEvent(eventName, eventTopic, args);\r\n\t\t});\r\n\t\tconst handlers = this._getEventHandlers(eventName, eventTopic);\r\n\t\tif (handlers) {\r\n\t\t\tfor (let i = 0, l = handlers.length; i < l; i++) {\r\n\t\t\t\tif (args.length) {\r\n\t\t\t\t\thandlers[i](...args);\r\n\t\t\t\t} else {\r\n\t\t\t\t\thandlers[i]();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default Eventbus;\r\n","export { default as Eventbus } from './eventbus';\r\nexport { default as ActionRegistryEventbusListener } from './actionregistry-eventbus-listener';\r\nexport { default as RequestVideoUriInterceptor } from './request-video-uri-interceptor';","import TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass RequestVideoUriInterceptor {\r\n\r\n\tconstructor(eventbus) {\r\n\t\tthis.eventbus = eventbus;\r\n\t}\r\n\r\n\tintercept(args) {\r\n\t\tthis.eventbus.broadcast(TimelineEventNames.BEFORE_REQUEST_TIMELINE_URI, args.slice());\r\n\t\treturn args;\r\n\t}\r\n\r\n}\r\n\r\nexport default RequestVideoUriInterceptor;\r\n","import * as controllers from '../controllers';\r\nimport * as operations from '../operation';\r\nimport * as providers from '../timelineproviders';\r\nimport * as main from '../';\r\n\r\nclass WebpackResourceImporter {\r\n\r\n    getOperationNames() {\r\n        return Object.keys(operations);\r\n    }\r\n\r\n    getControllerNames() {\r\n        return Object.keys(controllers);\r\n    }\r\n\r\n    getProviderNames() {\r\n        return Object.keys(providers);\r\n    }\r\n\r\n    import(name) {\r\n        if (operations[name]) {\r\n            return {\r\n                [name]: operations[name]\r\n            };\r\n        } else if (controllers[name]) {\r\n            return {\r\n                [name]: controllers[name]\r\n            };\r\n        } else if (providers[name]) {\r\n            return {\r\n                [name]: providers[name]\r\n            };\r\n        } else if (main[name]) {\r\n            return {\r\n                [name]: main[name]\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n\r\n}\r\n\r\nexport default WebpackResourceImporter;\r\n","import * as actions from './action';\r\nexport { default as ConfigurationResolver } from './configuration/configuration-resolver';\r\nexport { default as ChronoTriggerEngine } from './chrono-trigger-engine';\r\nexport { default as EngineFactory } from './engine-factory';\r\nexport { default as TimelineEventNames } from './timeline-event-names';\r\nexport { default as LanguageManager } from './language-manager';\r\nexport { default as WebpackResourceImporter } from './importer/webpack-resource-importer';\r\nexport { default as Eventbus } from './eventbus/eventbus';\r\nexport default actions;","import TimelineEventNames from \"./timeline-event-names\";\r\n\r\nclass LanguageManager {\r\n\r\n    constructor(language, labels, eventbus) {\r\n        if (!language || !language.length) {\r\n            throw new Error('language ctor arg cannot be null or have zero length');\r\n        }\r\n        if (!labels) {\r\n            throw new Error('labels ctor arg cannot be null');\r\n        }\r\n        if (!eventbus) {\r\n            throw new Error('eventbus ctor arg cannot be null');\r\n        }\r\n        this._labelLookup = {};\r\n        this._currentLanguage = language;\r\n        this._eventbusListeners = [];\r\n        this._createLabelLookup(labels);\r\n        this._addEventbusListeners(eventbus);\r\n    }\r\n\r\n    _addEventbusListeners(eventbus) {\r\n        this._eventbusListeners.push(eventbus.on(TimelineEventNames.REQUEST_LABEL_COLLECTION, this._handleRequestLabelCollection.bind(this)));\r\n        this._eventbusListeners.push(eventbus.on(TimelineEventNames.REQUEST_LABEL_COLLECTIONS, this._handleRequestLabelCollections.bind(this)));\r\n        this._eventbusListeners.push(eventbus.on(TimelineEventNames.REQUEST_CURRENT_LANGUAGE, this._handleRequestCurrentLanguage.bind(this)));\r\n        this._eventbusListeners.push(eventbus.on(TimelineEventNames.LANGUAGE_CHANGE, this._handleLanguageChange.bind(this)));\r\n    }\r\n\r\n    _handleRequestCurrentLanguage(resultCallback) {\r\n        resultCallback(this._currentLanguage);\r\n    }\r\n\r\n    _handleRequestLabelCollection(labelId, resultCallback) {\r\n        resultCallback(this._labelLookup[labelId]);\r\n    }\r\n\r\n    _handleRequestLabelCollections(labelIds, resultCallback) {\r\n        const labelCollections = labelIds.map((labelId) => {\r\n            return this._labelLookup[labelId];\r\n        });\r\n        resultCallback(labelCollections);\r\n    }\r\n\r\n    _handleLanguageChange(language) {\r\n        if (language && language.length) {\r\n            this._currentLanguage = language;\r\n        } else {\r\n            console.error('Language cannot be changed to null or empty string');\r\n        }\r\n    }\r\n\r\n    _createLabelLookup(labels) {\r\n        labels.forEach((label) => {\r\n            this._labelLookup[label.id] = label.labels;\r\n        });\r\n    }\r\n}\r\n\r\nexport default LanguageManager;\r\n","function addClass(operationData, eventBus) {\r\n    const {selectedElement, className} = operationData;\r\n    selectedElement.addClass(className);\r\n    return operationData;\r\n}\r\n\r\nexport default addClass;\r\n","import attachControllerToElement from './helper/attachControllerToElement';\r\nimport internalResolve from './helper/internalResolve';\r\n\r\nfunction addControllerToElement(operationData, eventBus) {\r\n    const {selectedElement, controllerInstance} = operationData;\r\n    \r\n    attachControllerToElement(selectedElement, controllerInstance);\r\n    \r\n    controllerInstance.init(operationData);\r\n\r\n    const promise = controllerInstance.attach(eventBus);\r\n\r\n    if (promise) {\r\n        return new Promise((resolve, reject)=> {\r\n            promise.then((newOperationData) => {\r\n                internalResolve(resolve, operationData, newOperationData);\r\n            }, reject);\r\n        })\r\n    } else {\r\n        return operationData;\r\n    }\r\n}\r\n\r\nexport default addControllerToElement;\r\n","function createOptionElementText(valueProperty, labelProperty, defaultIndex, defaultValue, data, index) {\r\n    let selected = '';\r\n    if (defaultValue) {\r\n        selected = (data[valueProperty] === defaultValue) ? ' selected' : '';\r\n    } else if (defaultIndex) {\r\n        selected = (index === defaultIndex) ? ' selected' : '';\r\n    }\r\n    return `<option value='${data[valueProperty]}'${selected}>${data[labelProperty]}</option>`;\r\n}\r\n\r\nfunction addOptionList(operationData, eventBus) {\r\n    const { valueProperty, labelProperty, defaultIndex, defaultValue, optionData, selectedElement } = operationData;\r\n\r\n    const createOption = createOptionElementText.bind(null, valueProperty, labelProperty, defaultIndex, defaultValue);\r\n\r\n    const optionElements = optionData.map(createOption);\r\n\r\n    selectedElement.html(optionElements);\r\n\r\n    return operationData;\r\n}\r\n\r\nexport default addOptionList;\r\n","import internalResolve from './helper/internalResolve';\r\n\r\nfunction animate(operationData, eventBus) {\r\n    const {animationEasing, selectedElement, animationProperties, animationDuration} = operationData;\r\n    const promise = new Promise((resolve, reject)=> {\r\n        try{\r\n            if (animationEasing) {\r\n                selectedElement.animate(animationProperties,\r\n                    animationDuration,\r\n                    animationEasing,\r\n                    () => {\r\n                        internalResolve(resolve, {}, operationData);\r\n                    });\r\n            } else {\r\n                selectedElement.animate(animationProperties,\r\n                    animationDuration,\r\n                    () => {\r\n                        internalResolve(resolve, {}, operationData);\r\n                    });\r\n            }\r\n        } catch(e){\r\n            reject(e);\r\n        }\r\n    });\r\n    return promise;\r\n}\r\n\r\nexport default animate;\r\n","import internalResolve from './helper/internalResolve';\r\n\r\nfunction animateWithClass(operationData, eventBus) {\r\n    let {selectedElement, className, removeClass } = operationData;\r\n    removeClass = (removeClass !== undefined) ? removeClass : true;\r\n\r\n    const promise = new Promise((resolve, reject)=> {\r\n        try{\r\n            selectedElement.one(\"webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationEnd\",\r\n            () => {\r\n                if (removeClass) {\r\n                    selectedElement.removeClass(className);\r\n                }\r\n                internalResolve(resolve, {}, operationData);\r\n            });\r\n        } catch(e){\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n    selectedElement.addClass(className);\r\n\r\n    return promise;\r\n}\r\n\r\nexport default animateWithClass;\r\n","import resolveEventArguments from './helper/resolveEventArguments';\r\nimport removeEventDataFromOperationData from './helper/removeEventDataFromOperationData';\r\n\r\nfunction broadcastEvent(operationData, eventBus) {\r\n    const {eventArgs, eventTopic, eventName} = operationData;\r\n\r\n    const eventArguments = resolveEventArguments(operationData, eventArgs);\r\n    \r\n    if (eventTopic) {\r\n        eventBus.broadcastForTopic(eventName, eventTopic, eventArguments);\r\n    } else {\r\n        eventBus.broadcast(eventName, eventArguments);\r\n    }\r\n\r\n    removeEventDataFromOperationData(operationData);\r\n}\r\n\r\nexport default broadcastEvent;\r\n","function clearElement(operationData, eventBus) {\r\n    const {selectedElement} = operationData;\r\n    selectedElement.empty();\r\n    return operationData;\r\n}\r\n\r\nexport default clearElement;\r\n","function clearOperationData(operationData, eventBus) {\r\n    return {};\r\n}\r\n\r\nexport default clearOperationData;\r\n","import internalResolve from './helper/internalResolve';\r\nimport TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction customFunction(operationData, eventBus) {\r\n    const {systemName} = operationData;\r\n    return new Promise((resolve, reject) => {\r\n        const resultCallback = (func)=> {\r\n            const promise = func(operationData, eventBus);\r\n            if (promise) {\r\n                promise.then(() => {\r\n                    internalResolve(resolve, {}, operationData);\r\n                }, reject);\r\n            } else {\r\n                internalResolve(resolve, {}, operationData);\r\n            }\r\n        };\r\n        eventBus.broadcast(TimelineEventNames.REQUEST_FUNCTION, [systemName, resultCallback]);\r\n    });\r\n}\r\n\r\nexport default customFunction;\r\n","import mergeOperationData from './helper/mergeOperationData';\r\nimport internalResolve from './helper/internalResolve';\r\n\r\nfunction endAction(operationData, eventBus) {\r\n    const {actionInstance, actionOperationData} = operationData;\r\n    delete operationData.actionOperationData;\r\n    return new Promise((resolve, reject)=> {\r\n        const mergedData = mergeOperationData(operationData, actionOperationData);\r\n        actionInstance.end(mergedData).then(() => {\r\n            internalResolve(resolve, operationData);\r\n        }, reject);\r\n    });\r\n}\r\n\r\nexport default endAction;\r\n","function extendController(operationData, eventBus) {\r\n    const { controllerInstance, controllerExtension } = operationData;\r\n    \r\n    operationData.controllerInstance = Object.assign(controllerInstance, controllerExtension);\r\n    \r\n    return operationData;\r\n}\r\n\r\nexport default extendController;\r\n","import { getElementControllers } from './helper/getElementData';\r\n\r\nfunction getControllerFromElement(operationData, eventBus) {\r\n    const {selectedElement, controllerName} = operationData;\r\n    const controllers = getElementControllers(selectedElement);\r\n    let controller = null;\r\n    controllers.some((ctrl) => {\r\n        if (ctrl.name === controllerName) {\r\n            controller = ctrl;\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n    if (!controller) {\r\n        console.warn(`controller for name '${controllerName}' was not found on the given element`);\r\n    }\r\n    operationData.controllerInstance = controller;\r\n    return operationData;\r\n}\r\n\r\nexport default getControllerFromElement;\r\n","import TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction getControllerInstance(operationData, eventBus) {\r\n    const {systemName} = operationData;\r\n    let {propertyName} = operationData;\r\n    \r\n    propertyName = propertyName || \"controllerInstance\";\r\n    const resultCallback = (instance)=> {\r\n        operationData[propertyName] = instance;\r\n    }\r\n    eventBus.broadcast(TimelineEventNames.REQUEST_INSTANCE, [systemName, resultCallback]);\r\n    return operationData;\r\n}\r\n\r\nexport default getControllerInstance;\r\n","import modifyDimensions from './helper/modifyDimensions';\r\n\r\nfunction getElementDimensions(operationData, eventBus) {\r\n    let {selectedElement, dimensions, modifier} = operationData;\r\n    dimensions = dimensions || {};\r\n    dimensions.width = selectedElement.innerWidth();\r\n    dimensions.height = selectedElement.innerHeight();\r\n    if (dimensions.height === 0) {\r\n        dimensions.height = dimensions.width;\r\n    }\r\n    if (modifier) {\r\n        modifyDimensions(dimensions, modifier);\r\n    }\r\n    operationData.dimensions = dimensions;\r\n    return operationData;\r\n}\r\n\r\nexport default getElementDimensions;\r\n","import { getElementControllers } from './getElementData';\r\n\r\nfunction attachControllerToElement(element, controller) {\r\n    if (!element.data('chronoEngineControllers')) {\r\n        element.data('chronoEngineControllers', []);\r\n    }\r\n    const controllers = getElementControllers(element);\r\n    controllers.push(controller);\r\n}\r\n\r\nexport default attachControllerToElement;\r\n","function deepcopy(original) {\r\n    return JSON.parse(JSON.stringify(original));\r\n}\r\n\r\nexport default deepcopy;\r\n","import getNestedValue from './getNestedValue';\r\n\r\nfunction extractOperationDataArgumentValues(sourceObject, argumentValue) {\r\n    if ((argumentValue) && (argumentValue.toLowerCase) && (argumentValue.toLowerCase().startsWith('operationdata.'))) {\r\n        let propNames = argumentValue.split('.');\r\n        propNames.shift();\r\n        return getNestedValue(propNames, sourceObject);\r\n    }\r\n    return argumentValue;\r\n}\r\n\r\nexport default extractOperationDataArgumentValues;\r\n","function getElementData(name, element) {\r\n    return element.data(name);\r\n}\r\n\r\nconst getElementControllers = getElementData.bind(null, \"chronoEngineControllers\");\r\n\r\nexport {\r\n    getElementData,\r\n    getElementControllers\r\n}","import getNestedValue from \"./getNestedValue\";\r\n\r\nfunction getNestedPropertyValue(propertyChain, sourceObject) {\r\n    const properties = propertyChain.split('.');\r\n    return getNestedValue(properties, sourceObject);\r\n}\r\n\r\nexport default getNestedPropertyValue;\r\n","function getNestedValue(properties, sourceObject) {\r\n    if (!properties) {\r\n        throw Error('properties arg cannot be null');\r\n    }\r\n    if (!sourceObject) {\r\n        throw Error('sourceObject arg cannot be null');\r\n    }\r\n    let currentInstance = sourceObject;\r\n    let suffix = null;\r\n    properties.forEach((prop, index) => {\r\n        if (index === properties.length-1) {\r\n            const parts = prop.split('+');\r\n            if (parts.length > 1) {\r\n                prop = parts[0];\r\n                suffix = parts[1];\r\n            }\r\n        }\r\n        currentInstance = currentInstance[prop];\r\n    });\r\n\r\n    return (suffix) ? currentInstance + suffix : currentInstance;\r\n}\r\n\r\nexport default getNestedValue;\r\n","import mergeOperationData from './mergeOperationData';\r\n\r\nfunction internalResolve(resolve, operationData, newOperationData) {\r\n    if (newOperationData) {\r\n        resolve(mergeOperationData(operationData, newOperationData));\r\n    } else {\r\n        resolve(operationData);\r\n    }\r\n}\r\n\r\nexport default internalResolve;\r\n","function mergeOperationData(operationData, newOperationData) {\r\n    return Object.assign(operationData, newOperationData);\r\n}\r\n\r\nexport default mergeOperationData;\r\n","function modifyDimensionsByRatio(ratioModifier, dimensions) {\r\n    //h[ar=8-1]\r\n    let prefix = ratioModifier.substr(0, 1);\r\n    let ratio = ratioModifier.substr(ratioModifier.indexOf('[') + 1, ratioModifier.indexOf(']') - ratioModifier.indexOf('[') - 1);\r\n    let ratios = ratio.split('=')[1].split('-');\r\n    if (prefix === 'h') {\r\n        dimensions.height = (dimensions.width / +ratios[0]) * +ratios[1];\r\n    } else if (prefix === 'w') {\r\n        dimensions.width = (dimensions.height / +ratios[1]) * +ratios[0];\r\n    }\r\n}\r\n\r\nfunction getModifierSuffix(modifier) {\r\n    let endIdx = 1;\r\n    let suffix = modifier.substr(modifier.length - 1, 1);\r\n    if ((suffix !== 'h') && (suffix !== 'w') && (suffix !== '%')) {\r\n        suffix = null;\r\n    }\r\n    const isPercent = (suffix === '%');\r\n    if (isPercent) {\r\n        endIdx = 2;\r\n        suffix = modifier.substr(modifier.length - endIdx, 1);\r\n        if ((suffix !== 'h') && (suffix !== 'w')) {\r\n            suffix = null;\r\n            endIdx = 1;\r\n        }\r\n    }\r\n    return [suffix, endIdx, isPercent];\r\n}\r\n\r\nfunction _modifyDimensions(dimensions, prefix, suffix, widthModifier, heightModifier) {\r\n    switch (prefix) {\r\n        case '+':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height += heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width += widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height += heightModifier;\r\n                    dimensions.width += widthModifier;\r\n            }\r\n            break;\r\n        case '-':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height -= heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width -= widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height -= heightModifier;\r\n                    dimensions.width -= widthModifier;\r\n            }\r\n            break;\r\n        case '/':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height /= heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width /= widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height /= heightModifier;\r\n                    dimensions.width /= widthModifier;\r\n            }\r\n            break;\r\n        case '*':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height *= heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width *= widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height *= heightModifier;\r\n                    dimensions.width *= widthModifier;\r\n            }\r\n            break;\r\n        default:\r\n            console.error(`Unknown operator found: ${prefix}`);\r\n    }\r\n    return dimensions;\r\n}\r\n\r\nfunction modifyDimensions(dimensions, modifier) {\r\n    let ratioModifier = null;\r\n    if (modifier.indexOf('|') > -1) {\r\n        [modifier, ratioModifier] = modifier.split('|');\r\n    }\r\n\r\n    const prefix = modifier.substr(0, 1);\r\n    let [suffix, endIdx, isPercent] = getModifierSuffix(modifier);\r\n\r\n    const value = parseInt((suffix !== null) ? modifier.substr(1, modifier.length - endIdx - 1) : modifier.substr(1, modifier.length), 10);\r\n\r\n    let widthModifier = value;\r\n    let heightModifier = value;\r\n    if (isPercent) {\r\n        widthModifier = (dimensions.width / 100) * value;\r\n        heightModifier = (dimensions.height / 100) * value;\r\n    }\r\n\r\n    dimensions = _modifyDimensions(dimensions, prefix, suffix, widthModifier, heightModifier);\r\n\r\n    if (ratioModifier) {\r\n        modifyDimensionsByRatio(ratioModifier, dimensions)\r\n    }\r\n}\r\n\r\nexport default modifyDimensions;","function removeEventDataFromOperationData(operationData) {\r\n    delete operationData.eventName;\r\n    delete operationData.eventTopic;\r\n    delete operationData.eventArgs;\r\n}\r\n\r\nexport default removeEventDataFromOperationData;\r\n","import extractOperationDataArgumentValues from './extractOperationDataArgumentValues';\r\n\r\nfunction resolveEventArguments(operationData, eventArgs) {\r\n    if (!eventArgs) {\r\n        return;\r\n    }\r\n    const extract = extractOperationDataArgumentValues.bind(null, operationData);\r\n    return eventArgs.map(extract);\r\n}\r\n\r\nexport default resolveEventArguments;\r\n","import extractOperationDataArgumentValues from './extractOperationDataArgumentValues';\r\nimport deepcopy from './deepcopy';\r\n\r\nfunction resolvePropertyValues(operationData, properties) {\r\n    const copy = deepcopy(properties);\r\n    const extract = extractOperationDataArgumentValues.bind(null, operationData);\r\n    for(let propertyName in properties) {\r\n        const propertyValue = properties[propertyName];\r\n        copy[propertyName] = extract(propertyValue);\r\n    }\r\n    return copy;\r\n}\r\n\r\nexport default resolvePropertyValues\r\n","export { default as addClass } from './addClass';\r\nexport { default as addControllerToElement } from './addControllerToElement';\r\nexport { default as addOptionList } from './addOptionList';\r\nexport { default as animate } from './animate';\r\nexport { default as animateWithClass } from './animateWithClass';\r\nexport { default as broadcastEvent } from './broadcastEvent';\r\nexport { default as clearElement } from './clearElement';\r\nexport { default as clearOperationData } from './clearOperationData';\r\nexport { default as customFunction } from './customFunction';\r\nexport { default as endAction } from './endAction';\r\nexport { default as extendController } from './extendController';\r\nexport { default as getControllerFromElement } from './getControllerFromElement';\r\nexport { default as getControllerInstance } from './getControllerInstance';\r\nexport { default as getElementDimensions } from './getElementDimensions';\r\nexport { default as loadJSON } from './loadJSON';\r\nexport { default as removeClass } from './removeClass';\r\nexport { default as removeControllerFromElement } from './removeControllerFromElement';\r\nexport { default as removeElement } from './removeElement';\r\nexport { default as removePropertiesFromOperationData } from './removePropertiesFromOperationData';\r\nexport { default as reparentElement } from './reparentElement';\r\nexport { default as requestAction } from './requestAction';\r\nexport { default as resizeAction } from './resizeAction';\r\nexport { default as selectElement } from './selectElement';\r\nexport { default as setElementAttributes } from './setElementAttributes';\r\nexport { default as setElementContent } from './setElementContent';\r\nexport { default as setOperationData } from './setOperationData';\r\nexport { default as setStyle } from './setStyle';\r\nexport { default as startAction } from './startAction';\r\nexport { default as toggleClass } from './toggleClass';\r\nexport { default as toggleElement } from './toggleElement';\r\nexport { default as wait } from './wait';\r\n","function loadJSON(jsonCache, operationData, eventBus) {\r\n    const {url, cache} = operationData;\r\n\r\n    let { propertyName } = operationData;\r\n    propertyName = propertyName || \"json\";\r\n\r\n    if (cache && jsonCache[url]) {\r\n        operationData[propertyName] = jsonCache[url];\r\n        return operationData;\r\n    }\r\n\r\n\r\n    return new Promise((resolve, reject)=> {\r\n        fetch(url)\r\n        .then((response)=> {\r\n            jsonCache[url] = operationData[propertyName] = response.body;\r\n            resolve(operationData);\r\n        })\r\n        .catch(reject);\r\n    });\r\n}\r\n\r\nexport default loadJSON.bind(null, {});\r\n","function removeClass(operationData, eventBus) {\r\n    const {selectedElement, className} = operationData;\r\n    selectedElement.removeClass(className);\r\n    return operationData;\r\n}\r\n\r\nexport default removeClass;\r\n","import {getElementControllers} from './helper/getElementData';\r\n\r\nfunction removeControllerFromElement(operationData, eventBus) {\r\n    const {selectedElement, controllerName} = operationData;\r\n\r\n    const controllers = getElementControllers(selectedElement);\r\n    if (controllers) {\r\n        let controller = null;\r\n        controllers.some((ctrl) => {\r\n            if (ctrl.name === controllerName) {\r\n                controller = ctrl;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        if (controller) {\r\n            const idx = controllers.indexOf(controller);\r\n            if (idx > -1) {\r\n                controllers.splice(idx, 1);\r\n            }\r\n            controller.detach(eventBus);\r\n        }\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default removeControllerFromElement;\r\n","export function removeElement(operationData, eventBus) {\r\n    operationData.selectedElement.remove();\r\n    return operationData;\r\n}\r\n\r\nexport default removeElement;\r\n","function removePropertiesFromOperationData(operationData, eventBus) {\r\n    const {\r\n        propertyNames\r\n    } = operationData;\r\n\r\n    propertyNames.forEach(name => {\r\n        delete operationData[name];\r\n    });\r\n    delete operationData.propertyNames;\r\n    return operationData;\r\n}\r\n\r\nexport default removePropertiesFromOperationData;","function reparentElement(operationData, eventBus) {\r\n    const {selectedElement, newParentSelector} = operationData;\r\n    selectedElement.remove().appendTo(newParentSelector);\r\n}\r\n\r\nexport default reparentElement;\r\n","import TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction requestAction(operationData, eventBus) {\r\n        const { actionName } = operationData;\r\n\r\n        const resultCallback = (action) => {\r\n            operationData.actionInstance = action;\r\n        };\r\n        eventBus.broadcast(TimelineEventNames.REQUEST_ACTION, [actionName, resultCallback]);\r\n        return operationData;\r\n}\r\n\r\nexport default requestAction;\r\n","import mergeOperationData from './helper/mergeOperationData';\r\n\r\nfunction resizeAction(operationData, eventBus) {\r\n    const {actionInstance, actionOperationData} = operationData;\r\n    operationData = mergeOperationData(operationData, actionOperationData);\r\n    if (actionInstance.resize) {\r\n        return actionInstance.resize(operationData);\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default resizeAction;\r\n","import TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction findElementBySelector(root, selector, operationData, propertyName) {\r\n    const element = root.find(selector);\r\n    if (!element.length) {\r\n        console.warn(`selector '${selector}' wasn't found!`);\r\n    }\r\n    operationData[propertyName] = element;\r\n    if (operationData.hasOwnProperty(\"propertyName\")) {\r\n        delete operationData.propertyName;\r\n    }\r\n}\r\n\r\nfunction selectElement(operationData, eventBus) {\r\n    let {selector, propertyName, useExistingAsRoot} = operationData;\r\n\r\n    if (!selector) {\r\n        throw new Error(\"selector is undefined!\");\r\n    }\r\n    propertyName = (propertyName) ? propertyName : \"selectedElement\";\r\n\r\n    if (useExistingAsRoot && operationData[propertyName]) {\r\n        const currentRoot = operationData[propertyName];\r\n        findElementBySelector(currentRoot, selector, operationData, propertyName);\r\n        return operationData;\r\n    }\r\n\r\n    const rootCallback = (root)=> {\r\n        findElementBySelector(root, selector, operationData, propertyName);\r\n    };\r\n    eventBus.broadcast(TimelineEventNames.REQUEST_ENGINE_ROOT, [rootCallback]);\r\n    return operationData;\r\n}\r\n\r\nexport default selectElement;\r\n","function setElementAttributes(operationData, eventBus) {\r\n    const {attributes, selectedElement} = operationData;\r\n    for (let attrName in attributes) {\r\n        if (attributes.hasOwnProperty(attrName)) {\r\n            selectedElement.attr(attrName, attributes[attrName]);\r\n        }\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default setElementAttributes;\r\n","function setElementContent(operationData, eventBus) {\r\n    const {append, selectedElement, template} = operationData;\r\n    if (!append) {\r\n        selectedElement.html(template);\r\n    } else {\r\n        selectedElement.append(template);\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default setElementContent;\r\n","import resolvePropertyValues from './helper/resolvePropertyValues';\r\n\r\nfunction setOperationData(operationData, eventBus) {\r\n    const properties = resolvePropertyValues(operationData, operationData.properties);\r\n    operationData = Object.assign(operationData, properties);\r\n    delete operationData.properties;\r\n    return operationData;\r\n}\r\n\r\nexport default setOperationData;\r\n","import resolvePropertyValues from './helper/resolvePropertyValues';\r\n\r\nfunction setStyle(operationData, eventBus) {\r\n    const properties = resolvePropertyValues(operationData, operationData.properties);\r\n    operationData.selectedElement.css(properties);\r\n    return operationData;\r\n}\r\n\r\nexport default setStyle;\r\n","import mergeOperationData from './helper/mergeOperationData';\r\nimport internalResolve from './helper/internalResolve';\r\n\r\nfunction startAction(operationData, eventBus) {\r\n    const {actionInstance, actionOperationData} = operationData;\r\n    return new Promise((resolve, reject)=> {\r\n        operationData = mergeOperationData(operationData, actionOperationData);\r\n        actionInstance.start(operationData).then(() => {\r\n            internalResolve(resolve, operationData);\r\n        }, reject);\r\n    });\r\n}\r\n\r\nexport default startAction;\r\n","function toggleClass(operationData, eventBus) {\r\n    const {selectedElement, className} = operationData;\r\n    selectedElement.toggleClass(className);\r\n    return operationData;\r\n}\r\n\r\nexport default toggleClass;\r\n","function toggleElement(operationData, eventBus) {\r\n    operationData.selectedElement.toggle();\r\n    return operationData;\r\n}\r\n\r\nexport default toggleElement;\r\n","import internalResolve from './helper/internalResolve';\r\n\r\nfunction wait(operationData, eventBus) {\r\n    const { milliseconds } = operationData;\r\n    return new Promise((resolve) => {\r\n        setTimeout(() => {\r\n            internalResolve(resolve, operationData);\r\n        }, milliseconds);\r\n    });\r\n}\r\n\r\nexport default wait;\r\n","class TimelineEventNames {\r\n    // timeline requests\r\n    static PLAY_TOGGLE_REQUEST = 'timeline-play-toggle-request';\r\n    static PLAY_REQUEST = 'timeline-play-request';\r\n    static STOP_REQUEST = 'timeline-stop-request';\r\n    static PAUSE_REQUEST = 'timeline-pause-request';\r\n    static SEEK_REQUEST = 'timeline-seek-request';\r\n    static RESIZE_REQUEST = 'timeline-resize-request';\r\n    static CONTAINER_REQUEST = 'timeline-container-request';\r\n    static DURATION_REQUEST = 'timeline-duration-request';\r\n    static PROVIDERID_REQUEST = 'timeline-providerid-request';\r\n\r\n    // timeline announcements\r\n    static DURATION = 'timeline-duration';\r\n    static TIME = 'timeline-time';\r\n    static SEEKED = 'timeline-seeked';\r\n    static COMPLETE = 'timeline-complete';\r\n    static PLAY = 'timeline-play';\r\n    static STOP = 'timeline-stop';\r\n    static PAUSE = 'timeline-pause';\r\n    static SEEK = 'timeline-seek';\r\n    static RESIZE = 'timeline-resize';\r\n    static POSITION_UPDATE = 'timeline-position-update';\r\n    static TIME_UPDATE = 'timeline-time-update';\r\n\r\n    // factory and engine events\r\n    static REQUEST_INSTANCE = 'request-instance';\r\n    static REQUEST_ACTION = 'request-action';\r\n    static REQUEST_FUNCTION = 'request-function';\r\n    static REQUEST_TIMELINE_URI = 'request-timeline-uri';\r\n    static BEFORE_REQUEST_TIMELINE_URI = 'before-request-timeline-uri';\r\n    static REQUEST_ENGINE_ROOT = 'request-engine-root';\r\n    static REQUEST_CURRENT_TIMELINE_POSITION = 'request-current-timeline-position';\r\n    static REQUEST_TIMELINE_CLEANUP = 'request-timeline-cleanup';\r\n    static EXECUTE_TIMELINEACTION = 'execute-timelineaction';\r\n    static RESIZE_TIMELINEACTION = 'resize-timelineaction';\r\n\r\n    //language manager events\r\n    static REQUEST_LABEL_COLLECTION = 'request-label-collection';\r\n    static REQUEST_LABEL_COLLECTIONS = 'request-label-collections';\r\n    static REQUEST_CURRENT_LANGUAGE = 'request-current-language';\r\n    static LANGUAGE_CHANGE = 'language-change';\r\n}\r\n\r\nexport default TimelineEventNames;\r\n","export { default as JwPlayerTimelineProvider } from './jwplayer-timeline-provider';\r\n// export { default as MediaElementTimelineProvider} from './mediaelement-timeline-provider';\r\nexport { default as RequestAnimationFrameTimelineProvider } from './request-animation-frame-timeline-provider';\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from '../timeline-event-names';\r\n\r\nclass JwPlayerTimelineProvider {\r\n\r\n   constructor(eventbus, config) {\r\n        this.eventbus = eventbus;\r\n        this.config = config;\r\n        this.providerid = config.playerSettings.selector;\r\n        this.loop = false;\r\n        this.player = null;\r\n        this.currentLoopHandler = null;\r\n        this._eventbusListeners = [];\r\n        this._addEventListeners();\r\n    }\r\n\r\n    _extractUrls(configuration) {\r\n        const urls = configuration.timelines.filter(timeline => timeline.type === \"video\").map(timeline => {\r\n            return timeline.uri;\r\n        });\r\n        return urls;\r\n    }\r\n\r\n    init(selector) {\r\n        const urls = this._extractUrls(this.config);\r\n        const jwp = window.jwplayer;\r\n        const p = $(`#${selector}`);\r\n        if (!p.length) {\r\n            throw new Error(`videoplayer selector '${selector}' not found`);\r\n        }\r\n        let w = p.innerWidth();\r\n        let h = p.innerHeight();\r\n        if (w === 0) {\r\n            w = 100;\r\n        }\r\n        if (h === 0) {\r\n            h = 300;\r\n        }\r\n\r\n        this.player = jwp(this.config.playerSettings.selector);\r\n        this.player.setup({\r\n            file: urls[0],\r\n            image: this.config.playerSettings.poster,\r\n            height: h,\r\n            width: w,\r\n            controls: true,\r\n            autostart: false,\r\n            displaytitle: false,\r\n            displaydescription: false,\r\n            nextUpDisplay: false,\r\n            abouttext: 'Rosetta Group',\r\n            aboutlink: 'http://www.rosettagroup.nl',\r\n            stretching: \"fill\",\r\n            repeat: false\r\n        });\r\n        const playlist = [];\r\n        urls.forEach((url) => {\r\n            playlist.push({\r\n                file: url,\r\n                title: url,\r\n                image: this.config.playerSettings.poster\r\n            });\r\n        });\r\n        const promise = new Promise((resolve, reject) => {\r\n            this.player.once(\"ready\", () => {\r\n                this._handlePlayerReady(resolve);\r\n            });\r\n            this.player.load(playlist);\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    _handlePlayerReady(resolve) {\r\n        this.player.once(\"firstFrame\", () => {\r\n            this.player.pause();\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.DURATION, this.player.playerid, [this.getDuration()]);\r\n            resolve(this);\r\n        });\r\n        this.player.on(TimelineEventNames.TIME, this._loopHandler.bind(this, Math.floor));\r\n        this.player.on(TimelineEventNames.SEEKED, this._seekedHandler.bind(this));\r\n        this.player.on(TimelineEventNames.COMPLETE, this._handlePlayerComplete.bind(this));\r\n        setTimeout(()=> {\r\n            this.player.play();\r\n        },10);\r\n    }\r\n\r\n    _handlePlayerComplete() {\r\n        if (!this.loop) {\r\n            this.stop();\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.COMPLETE, this.providerid, [this.player.getPlaylistIndex()]);\r\n        }\r\n    }\r\n\r\n    _seekedHandler() {\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEKED, this.providerid, [this.getPosition(), this.getDuration()]);\r\n    }\r\n\r\n    destroy() {\r\n        this.player.remove();\r\n        this._eventbusListeners.forEach(func => func());\r\n    }\r\n\r\n    _loopHandler(floor, event) {\r\n        const pos = floor(event.position);\r\n        if ((this.loop) && (pos === floor(this.player.getDuration() - 1))) {\r\n            this.seek(0);\r\n        }\r\n    }\r\n\r\n    _timeResetLoopHandler(event) {\r\n        if (this.loop) {\r\n            this.seek(0);\r\n        }\r\n    }\r\n\r\n    _addEventListeners() {\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PLAY_TOGGLE_REQUEST, this.toggleplay.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PLAY_REQUEST, this.play.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.STOP_REQUEST, this.stop.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PAUSE_REQUEST, this.pause.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.SEEK_REQUEST, this.seek.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.RESIZE_REQUEST, this.resize.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.CONTAINER_REQUEST, this._container.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.DURATION_REQUEST, this.duration.bind(this), this.providerid));\r\n    }\r\n\r\n    _container(resultCallback) {\r\n        let suffix = \"\";\r\n        if (this.player.getProvider().name !== \"html5\") {\r\n            suffix = \"_wrapper\";\r\n        }\r\n        const container = $(`#${this.providerid}${suffix}`);\r\n        resultCallback(container);\r\n    }\r\n\r\n    toggleplay() {\r\n        if (this.paused) {\r\n            this.play()\r\n        } else {\r\n            this.pause();\r\n        }\r\n    }\r\n\r\n    play() {\r\n        this.paused = false;\r\n        this.player.play();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PLAY, this.providerid);\r\n    }\r\n\r\n    stop() {\r\n        this.paused = false;\r\n        this.player.stop();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.STOP, this.providerid);\r\n    }\r\n\r\n    pause() {\r\n        this.paused = true;\r\n        this.player.pause();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PAUSE, this.providerid);\r\n    }\r\n\r\n    seek(position) {\r\n        const currentPosition = this.player.getPosition();\r\n        this.player.seek(position);\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEK, this.providerid, [position, currentPosition, this.player.getDuration()]);\r\n    }\r\n\r\n    resize(width, height) {\r\n        this.player.resize(width, height);\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.RESIZE, this.providerid, [width, height]);\r\n    }\r\n\r\n    duration(resultCallback) {\r\n        resultCallback(Math.floor(this.getDuration()));\r\n    }\r\n\r\n    playlistItem(index) {\r\n        this.player.playlistItem(index);\r\n    }\r\n\r\n    once(eventName, callback) {\r\n        this.player.once(eventName, callback);\r\n    }\r\n\r\n    off(eventName, callback) {\r\n        this.player.off(eventName, callback);\r\n    }\r\n\r\n    on(eventName, callback) {\r\n        this.player.on(eventName, callback);\r\n    }\r\n\r\n    getPosition() {\r\n        return this.player.getPosition();\r\n    }\r\n\r\n    getPlaylistIndex() {\r\n        return this.player.getPlaylistIndex();\r\n    }\r\n\r\n    getState() {\r\n        return this.player.getState();\r\n    }\r\n\r\n    getDuration() {\r\n        return this.player.getDuration();\r\n    }\r\n\r\n    getMute() {\r\n        return this.player.getMute();\r\n    }\r\n\r\n    getVolume() {\r\n        return this.player.getVolume();\r\n    }\r\n\r\n    setMute(state) {\r\n        this.player.setMute(state);\r\n    }\r\n\r\n    setVolume(volume) {\r\n        this.player.setVolume(volume);\r\n    }\r\n}\r\n\r\nexport default JwPlayerTimelineProvider;\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from '../timeline-event-names';\r\n\r\nclass RequestAnimationFrameTimelineProvider {\r\n\r\n    constructor(eventbus, config) {\r\n        this.eventbus = eventbus;\r\n        this.config = config;\r\n        this.requestID = null;\r\n        this.last = 0;\r\n        this.current = 0;\r\n        this._updateBound = this._update.bind(this);\r\n        this.loop = false;\r\n        this._eventbusListeners = [];\r\n        this.providerid = `provider${Math.random()*1000}`;\r\n        this._addEventListeners();\r\n        this.playlist = [];\r\n        this.currentPlaylistItem = null;\r\n        this.firstFrame = true;\r\n        this.playing = false;\r\n        this.paused = false;\r\n    }\r\n\r\n    _extractPlaylist(configuration) {\r\n        const playlist = configuration.timelines.filter(timeline => timeline.type === \"animation\").map(timeline => {\r\n            return timeline;\r\n        });\r\n        return playlist;\r\n    }\r\n\r\n    playlistItem(index) {\r\n        if (index < 0 || index > this.playlist.length) {\r\n            return;\r\n        }\r\n        this.currentPlaylistItem = this.playlist[index];\r\n        this.firstFrame = true;\r\n        this.reset();\r\n    }\r\n\r\n    _addEventListeners() {\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PLAY_TOGGLE_REQUEST, this.toggleplay.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PLAY_REQUEST, this.play.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.STOP_REQUEST, this.stop.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PAUSE_REQUEST, this.pause.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.SEEK_REQUEST, this.seek.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.RESIZE_REQUEST, this._resize.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.CONTAINER_REQUEST, this._container.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.DURATION_REQUEST, this.requestDurationHandler.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PROVIDERID_REQUEST, this.requestProviderIdHandler.bind(this)));\r\n    }\r\n\r\n    _update(now) {\r\n        if (!this.playing) {\r\n            return;\r\n        }\r\n        if(!this.last || now - this.last >= 1000) {\r\n            if (!this.last && this.firstFrame) {\r\n                this.firstFrame = false;\r\n                this.eventbus.broadcastForTopic(TimelineEventNames.FIRSTFRAME, this.providerid);\r\n            }\r\n            this.last = now;\r\n            this.current++;\r\n            if (this.current > this.currentPlaylistItem.duration) {\r\n                if (this.loop) {\r\n                    this._reset();\r\n                } else {\r\n                    this.stop();\r\n                    this.eventbus.broadcastForTopic(TimelineEventNames.COMPLETE, this.providerid);\r\n                    return;\r\n                }\r\n            }\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.TIME, this.providerid, [{position: this.current}]);\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.POSITION_UPDATE, this.providerid, [{position: this.current, duration: this.currentPlaylistItem.duration}]);\r\n        }\r\n        this.requestID = requestAnimationFrame(this._updateBound);\r\n    }\r\n\r\n    _start() {\r\n        if (this.requestID && this.playing) {\r\n            return;\r\n        }\r\n        this.requestID = requestAnimationFrame(this._updateBound)\r\n    }\r\n\r\n    _reset() {\r\n        this._cancelAnimationFrame();\r\n        this.last = 0;\r\n        this.current = 0;\r\n    }\r\n\r\n    _resize() {\r\n        console.error('Not implemented yet');\r\n    }\r\n\r\n    _container(callBack) {\r\n        callBack(this.container);\r\n    }\r\n\r\n    _cancelAnimationFrame() {\r\n        if (this.requestID) {\r\n            cancelAnimationFrame(this.requestID);\r\n            this.requestID =  null;\r\n            this.last = 0;\r\n            this.current = 0;\r\n        }\r\n    }\r\n\r\n    init() {\r\n        this.playlist = this._extractPlaylist(this.config);\r\n        this.currentPlaylistItem = this.playlist[0];\r\n        this.container = $(this.currentPlaylistItem.selector);\r\n        if (!this.container.length) {\r\n            throw new Error(`timeline selector '${selector}' not found`);\r\n        }\r\n        const promise = new Promise((resolve) => {\r\n            resolve();\r\n        });\r\n        return promise;\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this.stop();\r\n        this._eventbusListeners.forEach(func => func());\r\n    }\r\n\r\n    toggleplay() {\r\n        if (!this.playing) {\r\n            this.play();\r\n        } else {\r\n            this.pause();\r\n        }\r\n    }\r\n\r\n    play(){\r\n        this._start();\r\n        this.playing = true;\r\n        this.paused = false;\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PLAY, this.providerid);\r\n    }\r\n\r\n    stop() {\r\n        this._cancelAnimationFrame();\r\n        this.playing = false;\r\n        this.paused = false;\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.STOP, this.providerid);\r\n    }\r\n\r\n    pause() {\r\n        this.playing = false;\r\n        this.paused = true;\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PAUSE, this.providerid);\r\n    }\r\n\r\n    seek(position) {\r\n        if (position < 0 || position > this.currentPlaylistItem.duration) {\r\n            return;\r\n        }\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEK, this.providerid);\r\n        this.current = position;\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEKED, this.providerid);\r\n    }\r\n\r\n    getPosition() {\r\n        return this.current;\r\n    }\r\n\r\n    getDuration() {\r\n        return this.currentPlaylistItem.duration;\r\n    }\r\n\r\n    requestDurationHandler(callBack) {\r\n        callBack(this.currentPlaylistItem.duration);\r\n    }\r\n\r\n    requestProviderIdHandler(callBack) {\r\n        callBack(this.providerid);\r\n    }\r\n\r\n    on(eventName, handler) {\r\n        return this.eventbus.on(eventName, handler, this.providerid);\r\n    }\r\n\r\n    once(eventName, handler) {\r\n        return this.eventbus.once(eventName, handler, this.providerid);\r\n    }\r\n}\r\n\r\nexport default RequestAnimationFrameTimelineProvider;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE_jquery__;","module.exports = __WEBPACK_EXTERNAL_MODULE_lottie_web__;"],"sourceRoot":""}